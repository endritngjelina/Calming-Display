<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Majestic Mountain Environment</title>
    <style>
        :root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08); /* Light blue */
  --color-bg-2: rgba(245, 158, 11, 0.08); /* Light yellow */
  --color-bg-3: rgba(34, 197, 94, 0.08); /* Light green */
  --color-bg-4: rgba(239, 68, 68, 0.08); /* Light red */
  --color-bg-5: rgba(147, 51, 234, 0.08); /* Light purple */
  --color-bg-6: rgba(249, 115, 22, 0.08); /* Light orange */
  --color-bg-7: rgba(236, 72, 153, 0.08); /* Light pink */
  --color-bg-8: rgba(6, 182, 212, 0.08); /* Light cyan */

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Common style patterns */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for opacity control */
  --color-success-rgb: 33, 128, 141;
  --color-error-rgb: 192, 21, 47;
  --color-warning-rgb: 168, 75, 47;
  --color-info-rgb: 98, 108, 113;

  /* Typography */
  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo,
    Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04),
    0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04),
    0 4px 6px -2px rgba(0, 0, 0, 0.02);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

  /* Layout */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;
}

/* Dark mode colors */
@media (prefers-color-scheme: dark) {
  :root {
    /* RGB versions for opacity control (Dark Mode) */
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;

    /* Background color tokens (Dark Mode) */
    --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
    --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
    --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
    --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
    --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
    --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
    --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
    --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

    /* Semantic Color Tokens (Dark Mode) */
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.15);
    --button-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

    /* Common style patterns - updated for dark mode */
    --focus-ring: 0 0 0 3px var(--color-focus-ring);
    --focus-outline: 2px solid var(--color-primary);
    --status-bg-opacity: 0.15;
    --status-border-opacity: 0.25;
    --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

    /* RGB versions for dark mode */
    --color-success-rgb: var(--color-teal-300-rgb);
    --color-error-rgb: var(--color-red-400-rgb);
    --color-warning-rgb: var(--color-orange-400-rgb);
    --color-info-rgb: var(--color-gray-300-rgb);
  }
}

/* Data attribute for manual theme switching */
[data-color-scheme="dark"] {
  /* RGB versions for opacity control (dark mode) */
  --color-gray-400-rgb: 119, 124, 124;
  --color-teal-300-rgb: 50, 184, 198;
  --color-gray-300-rgb: 167, 169, 169;
  --color-gray-200-rgb: 245, 245, 245;

  /* Colorful background palette - Dark Mode */
  --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
  --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
  --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
  --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
  --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
  --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
  --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
  --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

  /* Semantic Color Tokens (Dark Mode) */
  --color-background: var(--color-charcoal-700);
  --color-surface: var(--color-charcoal-800);
  --color-text: var(--color-gray-200);
  --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
  --color-primary: var(--color-teal-300);
  --color-primary-hover: var(--color-teal-400);
  --color-primary-active: var(--color-teal-800);
  --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
  --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
  --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
  --color-border: rgba(var(--color-gray-400-rgb), 0.3);
  --color-error: var(--color-red-400);
  --color-success: var(--color-teal-300);
  --color-warning: var(--color-orange-400);
  --color-info: var(--color-gray-300);
  --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
  --color-btn-primary-text: var(--color-slate-900);
  --color-card-border: rgba(var(--color-gray-400-rgb), 0.15);
  --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
  --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

  /* Common style patterns - updated for dark mode */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for dark mode */
  --color-success-rgb: var(--color-teal-300-rgb);
  --color-error-rgb: var(--color-red-400-rgb);
  --color-warning-rgb: var(--color-orange-400-rgb);
  --color-info-rgb: var(--color-gray-300-rgb);
}

[data-color-scheme="light"] {
  /* RGB versions for opacity control (light mode) */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);

  /* RGB versions for light mode */
  --color-success-rgb: var(--color-teal-500-rgb);
  --color-error-rgb: var(--color-red-500-rgb);
  --color-warning-rgb: var(--color-orange-500-rgb);
  --color-info-rgb: var(--color-slate-500-rgb);
}

/* Base styles */
html {
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  line-height: var(--line-height-normal);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text);
  letter-spacing: var(--letter-spacing-tight);
}

h1 {
  font-size: var(--font-size-4xl);
}
h2 {
  font-size: var(--font-size-3xl);
}
h3 {
  font-size: var(--font-size-2xl);
}
h4 {
  font-size: var(--font-size-xl);
}
h5 {
  font-size: var(--font-size-lg);
}
h6 {
  font-size: var(--font-size-md);
}

p {
  margin: 0 0 var(--space-16) 0;
}

a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-standard);
}

a:hover {
  color: var(--color-primary-hover);
}

code,
pre {
  font-family: var(--font-family-mono);
  font-size: calc(var(--font-size-base) * 0.95);
  background-color: var(--color-secondary);
  border-radius: var(--radius-sm);
}

code {
  padding: var(--space-1) var(--space-4);
}

pre {
  padding: var(--space-16);
  margin: var(--space-16) 0;
  overflow: auto;
  border: 1px solid var(--color-border);
}

pre code {
  background: none;
  padding: 0;
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-16);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-weight: 500;
  line-height: 1.5;
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  border: none;
  text-decoration: none;
  position: relative;
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.btn--primary {
  background: var(--color-primary);
  color: var(--color-btn-primary-text);
}

.btn--primary:hover {
  background: var(--color-primary-hover);
}

.btn--primary:active {
  background: var(--color-primary-active);
}

.btn--secondary {
  background: var(--color-secondary);
  color: var(--color-text);
}

.btn--secondary:hover {
  background: var(--color-secondary-hover);
}

.btn--secondary:active {
  background: var(--color-secondary-active);
}

.btn--outline {
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text);
}

.btn--outline:hover {
  background: var(--color-secondary);
}

.btn--sm {
  padding: var(--space-4) var(--space-12);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-sm);
}

.btn--lg {
  padding: var(--space-10) var(--space-20);
  font-size: var(--font-size-lg);
  border-radius: var(--radius-md);
}

.btn--full-width {
  width: 100%;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Form elements */
.form-control {
  display: block;
  width: 100%;
  padding: var(--space-8) var(--space-12);
  font-size: var(--font-size-md);
  line-height: 1.5;
  color: var(--color-text);
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  transition: border-color var(--duration-fast) var(--ease-standard),
    box-shadow var(--duration-fast) var(--ease-standard);
}

textarea.form-control {
  font-family: var(--font-family-base);
  font-size: var(--font-size-base);
}

select.form-control {
  padding: var(--space-8) var(--space-12);
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: var(--select-caret-light);
  background-repeat: no-repeat;
  background-position: right var(--space-12) center;
  background-size: 16px;
  padding-right: var(--space-32);
}

/* Add a dark mode specific caret */
@media (prefers-color-scheme: dark) {
  select.form-control {
    background-image: var(--select-caret-dark);
  }
}

/* Also handle data-color-scheme */
[data-color-scheme="dark"] select.form-control {
  background-image: var(--select-caret-dark);
}

[data-color-scheme="light"] select.form-control {
  background-image: var(--select-caret-light);
}

.form-control:focus {
  border-color: var(--color-primary);
  outline: var(--focus-outline);
}

.form-label {
  display: block;
  margin-bottom: var(--space-8);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.form-group {
  margin-bottom: var(--space-16);
}

/* Card component */
.card {
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  transition: box-shadow var(--duration-normal) var(--ease-standard);
}

.card:hover {
  box-shadow: var(--shadow-md);
}

.card__body {
  padding: var(--space-16);
}

.card__header,
.card__footer {
  padding: var(--space-16);
  border-bottom: 1px solid var(--color-card-border-inner);
}

/* Status indicators - simplified with CSS variables */
.status {
  display: inline-flex;
  align-items: center;
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-full);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.status--success {
  background-color: rgba(
    var(--color-success-rgb, 33, 128, 141),
    var(--status-bg-opacity)
  );
  color: var(--color-success);
  border: 1px solid
    rgba(var(--color-success-rgb, 33, 128, 141), var(--status-border-opacity));
}

.status--error {
  background-color: rgba(
    var(--color-error-rgb, 192, 21, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-error);
  border: 1px solid
    rgba(var(--color-error-rgb, 192, 21, 47), var(--status-border-opacity));
}

.status--warning {
  background-color: rgba(
    var(--color-warning-rgb, 168, 75, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-warning);
  border: 1px solid
    rgba(var(--color-warning-rgb, 168, 75, 47), var(--status-border-opacity));
}

.status--info {
  background-color: rgba(
    var(--color-info-rgb, 98, 108, 113),
    var(--status-bg-opacity)
  );
  color: var(--color-info);
  border: 1px solid
    rgba(var(--color-info-rgb, 98, 108, 113), var(--status-border-opacity));
}

/* Container layout */
.container {
  width: 100%;
  margin-right: auto;
  margin-left: auto;
  padding-right: var(--space-16);
  padding-left: var(--space-16);
}

@media (min-width: 640px) {
  .container {
    max-width: var(--container-sm);
  }
}
@media (min-width: 768px) {
  .container {
    max-width: var(--container-md);
  }
}
@media (min-width: 1024px) {
  .container {
    max-width: var(--container-lg);
  }
}
@media (min-width: 1280px) {
  .container {
    max-width: var(--container-xl);
  }
}

/* Utility classes */
.flex {
  display: flex;
}
.flex-col {
  flex-direction: column;
}
.items-center {
  align-items: center;
}
.justify-center {
  justify-content: center;
}
.justify-between {
  justify-content: space-between;
}
.gap-4 {
  gap: var(--space-4);
}
.gap-8 {
  gap: var(--space-8);
}
.gap-16 {
  gap: var(--space-16);
}

.m-0 {
  margin: 0;
}
.mt-8 {
  margin-top: var(--space-8);
}
.mb-8 {
  margin-bottom: var(--space-8);
}
.mx-8 {
  margin-left: var(--space-8);
  margin-right: var(--space-8);
}
.my-8 {
  margin-top: var(--space-8);
  margin-bottom: var(--space-8);
}

.p-0 {
  padding: 0;
}
.py-8 {
  padding-top: var(--space-8);
  padding-bottom: var(--space-8);
}
.px-8 {
  padding-left: var(--space-8);
  padding-right: var(--space-8);
}
.py-16 {
  padding-top: var(--space-16);
  padding-bottom: var(--space-16);
}
.px-16 {
  padding-left: var(--space-16);
  padding-right: var(--space-16);
}

.block {
  display: block;
}
.hidden {
  display: none;
}

/* Accessibility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

:focus-visible {
  outline: var(--focus-outline);
  outline-offset: 2px;
}

/* Dark mode specifics */
[data-color-scheme="dark"] .btn--outline {
  border: 1px solid var(--color-border-secondary);
}

@font-face {
  font-family: 'FKGroteskNeue';
  src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2')
    format('woff2');
}

/* END PERPLEXITY DESIGN SYSTEM */
:root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08); /* Light blue */
  --color-bg-2: rgba(245, 158, 11, 0.08); /* Light yellow */
  --color-bg-3: rgba(34, 197, 94, 0.08); /* Light green */
  --color-bg-4: rgba(239, 68, 68, 0.08); /* Light red */
  --color-bg-5: rgba(147, 51, 234, 0.08); /* Light purple */
  --color-bg-6: rgba(249, 115, 22, 0.08); /* Light orange */
  --color-bg-7: rgba(236, 72, 153, 0.08); /* Light pink */
  --color-bg-8: rgba(6, 182, 212, 0.08); /* Light cyan */

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Common style patterns */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for opacity control */
  --color-success-rgb: 33, 128, 141;
  --color-error-rgb: 192, 21, 47;
  --color-warning-rgb: 168, 75, 47;
  --color-info-rgb: 98, 108, 113;

  /* Typography */
  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo,
    Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04),
    0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04),
    0 4px 6px -2px rgba(0, 0, 0, 0.02);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

  /* Layout */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;
}

/* Dark mode colors */
@media (prefers-color-scheme: dark) {
  :root {
    /* RGB versions for opacity control (Dark Mode) */
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;

    /* Background color tokens (Dark Mode) */
    --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
    --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
    --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
    --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
    --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
    --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
    --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
    --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

    /* Semantic Color Tokens (Dark Mode) */
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.15);
    --button-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

    /* Common style patterns - updated for dark mode */
    --focus-ring: 0 0 0 3px var(--color-focus-ring);
    --focus-outline: 2px solid var(--color-primary);
    --status-bg-opacity: 0.15;
    --status-border-opacity: 0.25;
    --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

    /* RGB versions for dark mode */
    --color-success-rgb: var(--color-teal-300-rgb);
    --color-error-rgb: var(--color-red-400-rgb);
    --color-warning-rgb: var(--color-orange-400-rgb);
    --color-info-rgb: var(--color-gray-300-rgb);
  }
}

/* Data attribute for manual theme switching */
[data-color-scheme="dark"] {
  /* RGB versions for opacity control (dark mode) */
  --color-gray-400-rgb: 119, 124, 124;
  --color-teal-300-rgb: 50, 184, 198;
  --color-gray-300-rgb: 167, 169, 169;
  --color-gray-200-rgb: 245, 245, 245;

  /* Colorful background palette - Dark Mode */
  --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
  --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
  --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
  --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
  --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
  --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
  --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
  --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

  /* Semantic Color Tokens (Dark Mode) */
  --color-background: var(--color-charcoal-700);
  --color-surface: var(--color-charcoal-800);
  --color-text: var(--color-gray-200);
  --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
  --color-primary: var(--color-teal-300);
  --color-primary-hover: var(--color-teal-400);
  --color-primary-active: var(--color-teal-800);
  --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
  --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
  --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
  --color-border: rgba(var(--color-gray-400-rgb), 0.3);
  --color-error: var(--color-red-400);
  --color-success: var(--color-teal-300);
  --color-warning: var(--color-orange-400);
  --color-info: var(--color-gray-300);
  --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
  --color-btn-primary-text: var(--color-slate-900);
  --color-card-border: rgba(var(--color-gray-400-rgb), 0.15);
  --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
  --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

  /* Common style patterns - updated for dark mode */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for dark mode */
  --color-success-rgb: var(--color-teal-300-rgb);
  --color-error-rgb: var(--color-red-400-rgb);
  --color-warning-rgb: var(--color-orange-400-rgb);
  --color-info-rgb: var(--color-gray-300-rgb);
}

[data-color-scheme="light"] {
  /* RGB versions for opacity control (light mode) */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);

  /* RGB versions for light mode */
  --color-success-rgb: var(--color-teal-500-rgb);
  --color-error-rgb: var(--color-red-500-rgb);
  --color-warning-rgb: var(--color-orange-500-rgb);
  --color-info-rgb: var(--color-slate-500-rgb);
}

/* Base styles */
html {
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  line-height: var(--line-height-normal);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

@font-face {
  font-family: 'FKGroteskNeue';
  src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2')
    format('woff2');
}

/* Serene Nature Environment Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
}

body {
    font-family: var(--font-family-base);
    overflow: hidden;
    height: 100vh;
    background: linear-gradient(180deg, #42a5f5 0%, #64b5f6 30%, #78909c 70%, #ffffff 100%);
    animation: mountainShift 45s ease-in-out infinite;
}

@keyframes mountainShift {
    0%, 100% { background: linear-gradient(180deg, #42a5f5 0%, #64b5f6 30%, #78909c 70%, #ffffff 100%); }
    25% { background: linear-gradient(180deg, #ffd1dc 0%, #ffb6c1 30%, #90a4ae 70%, #ffffff 100%); }
    50% { background: linear-gradient(180deg, #ff8c69 0%, #ff7043 30%, #8d6e63 70%, #ffffff 100%); }
    75% { background: linear-gradient(180deg, #1a237e 0%, #283593 30%, #455a64 70%, #90a4ae 100%); }
}

.app-container {
    position: relative;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

.main-canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    cursor: pointer;
    z-index: 1;
}

.background-shapes {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
}

.floating-shape {
    position: absolute;
    border-radius: 50%;
    opacity: 0.3;
    animation: float 6s ease-in-out infinite;
}

@keyframes gentleSway {
    0%, 100% { transform: translateX(0px) rotate(0deg) scale(1); }
    50% { transform: translateX(3px) rotate(1deg) scale(1.02); }
}

.control-panel {
    position: fixed;
    bottom: 20px;
    right: 20px;
    display: flex;
    gap: 12px;
    z-index: 100;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(20px);
    padding: 12px 16px;
    border-radius: 16px;
    border: 1px solid rgba(120, 144, 156, 0.3);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    transition: opacity 0.3s ease;
}

.control-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 8px 12px;
    background: rgba(120, 144, 156, 0.2);
    border: 1px solid rgba(78, 109, 156, 0.3);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 60px;
    backdrop-filter: blur(10px);
}

.control-btn:hover {
    background: rgba(120, 144, 156, 0.4);
    border-color: rgba(78, 109, 156, 0.6);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(120, 144, 156, 0.3);
}

.control-btn:active {
    transform: translateY(0);
    background: rgba(120, 144, 156, 0.5);
}

.control-btn.active {
    background: rgba(120, 144, 156, 0.5);
    border-color: rgba(78, 109, 156, 0.8);
    box-shadow: 0 0 15px rgba(120, 144, 156, 0.6);
}

.btn-icon {
    font-size: 18px;
    margin-bottom: 3px;
}

.btn-text {
    font-size: 10px;
    font-weight: var(--font-weight-medium);
    color: rgba(19, 52, 59, 0.9);
    letter-spacing: 0.5px;
}

.time-display {
    position: fixed;
    top: 20px;
    right: 20px;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(15px);
    padding: 12px 20px;
    border-radius: 12px;
    border: 1px solid rgba(120, 144, 156, 0.3);
    z-index: 100;
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-medium);
    color: rgba(19, 52, 59, 0.9);
    letter-spacing: 1px;
}

.mountain-info {
    position: fixed;
    top: 20px;
    left: 20px;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(20px);
    padding: 12px 20px;
    border-radius: 12px;
    border: 1px solid rgba(120, 144, 156, 0.3);
    z-index: 100;
    display: flex;
    flex-direction: column;
    gap: 4px;
    transition: all 0.3s ease;
}

.location-display,
.altitude-display,
.time-display,
.weather-display {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: rgba(19, 52, 59, 0.8);
}

.location-display {
    font-size: var(--font-size-lg);
    color: rgba(78, 109, 156, 0.9);
}

.altitude-display {
    font-size: var(--font-size-xs);
    color: rgba(120, 144, 156, 0.7);
    font-family: var(--font-family-mono);
}



.screen-flash {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, rgba(120, 144, 156, 0.3), transparent 70%);
    pointer-events: none;
    z-index: 1000;
    opacity: 0;
    animation: mountainFlash 0.5s ease-out;
}

@keyframes mountainFlash {
    0% { opacity: 0; }
    50% { opacity: 1; }
    100% { opacity: 0; }
}

.focus-mode .control-panel {
    opacity: 0.3;
}

.focus-mode .time-display,
.focus-mode .scene-info {
    opacity: 0.5;
}

@keyframes starTwinkle {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.2); }
}

@keyframes galaxySpin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes nebulaFlow {
    0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.6; }
    50% { transform: scale(1.1) rotate(180deg); opacity: 0.8; }
}

@keyframes shootingStar {
    0% { transform: translateX(-100px) translateY(100px); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateX(100vw) translateY(-100px); opacity: 0; }
}

@keyframes cometTrail {
    0% { transform: translateX(-200px) rotate(45deg); opacity: 0; }
    20% { opacity: 0.8; }
    80% { opacity: 0.8; }
    100% { transform: translateX(calc(100vw + 200px)) rotate(45deg); opacity: 0; }
}

/* Responsive Design */
@media (max-width: 768px) {
    .control-panel {
        bottom: 10px;
        right: 10px;
        gap: 8px;
        padding: 8px 12px;
    }
    
    .control-btn {
        min-width: 50px;
        padding: 6px 8px;
    }
    
    .btn-icon {
        font-size: 16px;
    }
    
    .btn-text {
        font-size: 9px;
    }
    
    .time-display, .scene-info {
        top: 10px;
        padding: 8px 12px;
        font-size: var(--font-size-base);
    }
    
    .timer-ring {
        width: 150px;
        height: 150px;
    }
    
    .timer-progress {
        width: 150px;
        height: 150px;
    }
    
    .timer-text {
        font-size: var(--font-size-xl);
    }
}

@media (max-width: 480px) {
    .control-btn {
        min-width: 45px;
        padding: 6px 8px;
    }
    
    .btn-icon {
        font-size: 14px;
    }
    
    .btn-text {
        font-size: 8px;
    }
    
    .timer-ring {
        width: 120px;
        height: 120px;
    }
    
    .timer-progress {
        width: 120px;
        height: 120px;
    }
}

/* Touch-friendly styles */
@media (pointer: coarse) {
    .control-btn {
        min-height: 50px;
        min-width: 60px;
    }
}
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Main Canvas Area -->
        <canvas id="mainCanvas" class="main-canvas"></canvas>
        
        <!-- Floating Background Elements -->
        <div class="background-shapes"></div>
        
        <!-- Control Panel -->
        <div class="control-panel">
            <button class="control-btn" id="locationBtn">
                <span class="btn-icon">üèîÔ∏è</span>
                <span class="btn-text">Location</span>
            </button>
            
            <button class="control-btn" id="timeBtn">
                <span class="btn-icon">üåÖ</span>
                <span class="btn-text">Time</span>
            </button>
            
            <button class="control-btn" id="weatherBtn">
                <span class="btn-icon">‚òÅÔ∏è</span>
                <span class="btn-text">Weather</span>
            </button>
            
            <button class="control-btn" id="clearBtn">
                <span class="btn-icon">üßπ</span>
                <span class="btn-text">Clear</span>
            </button>
        </div>
        
        <!-- Time Display -->
        <div class="time-display" id="timeDisplay">
            <span id="currentTime"></span>
        </div>
        

        
        <!-- Mountain Info -->
        <div class="mountain-info" id="mountainInfo">
            <div class="location-display" id="locationDisplay">Alps</div>
            <div class="altitude-display" id="altitudeDisplay">2,847m</div>
            <div class="time-display" id="timeOfDayDisplay">Sunrise</div>
            <div class="weather-display" id="weatherDisplay">Clear</div>
        </div>
    </div>
    
    <script>
        // Majestic Mountain Environment - Main Application
        class MountainEnvironment {
            constructor() {
                this.canvas = document.getElementById('mainCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.timeDisplay = document.getElementById('timeDisplay');
                this.mountainInfo = document.getElementById('mountainInfo');
                this.locationDisplay = document.getElementById('locationDisplay');
                this.altitudeDisplay = document.getElementById('altitudeDisplay');
                this.timeOfDayDisplay = document.getElementById('timeOfDayDisplay');
                this.weatherDisplay = document.getElementById('weatherDisplay');
                
                // Application state
                this.mountains = [];
                this.clouds = [];
                this.eagles = [];
                this.mountainGoats = [];
                this.snowParticles = [];
                this.stars = [];
                this.waterfalls = [];
                this.particles = [];
                this.currentLocation = 0;
                this.currentTimeOfDay = 0;
                this.currentWeather = 0;
                this.windStrength = 0.3;
                this.isSnowing = false;
                this.lightningFlashes = [];
                
                this.locations = [
                    {
                        name: 'Alps',
                        colors: ['#e3f2fd', '#90caf9', '#64b5f6', '#ffffff', '#b0bec5'],
                        mountainColors: ['#78909c', '#90a4ae', '#ffffff'],
                        description: 'Sharp jagged peaks, snow-covered, alpine meadows',
                        altitude: '2,847m'
                    },
                    {
                        name: 'Rockies',
                        colors: ['#e1f5fe', '#81d4fa', '#4fc3f7', '#8d6e63', '#a1887f'],
                        mountainColors: ['#5d4037', '#6d4c41', '#ffffff'],
                        description: 'Rugged peaks, pine forests, dramatic cliffs',
                        altitude: '3,426m'
                    },
                    {
                        name: 'Himalayas',
                        colors: ['#f3e5f5', '#ce93d8', '#ba68c8', '#ffffff', '#e0e0e0'],
                        mountainColors: ['#9e9e9e', '#bdbdbd', '#ffffff'],
                        description: 'Massive snow peaks, highest altitude, prayer flags',
                        altitude: '5,642m'
                    },
                    {
                        name: 'Fjords',
                        colors: ['#e0f2f1', '#80cbc4', '#4db6ac', '#607d8b', '#90a4ae'],
                        mountainColors: ['#455a64', '#546e7a', '#ffffff'],
                        description: 'Steep cliffs meeting water, Nordic atmosphere',
                        altitude: '1,204m'
                    }
                ];
                
                this.timesOfDay = [
                    {
                        name: 'Sunrise',
                        skyColors: ['#ff6f61', '#ffab91', '#ffccbc', '#90caf9'],
                        lightIntensity: 0.7,
                        description: 'Pink/orange alpenglow on peaks'
                    },
                    {
                        name: 'Day',
                        skyColors: ['#42a5f5', '#64b5f6', '#90caf9', '#bbdefb'],
                        lightIntensity: 1.0,
                        description: 'Bright blue sky, clear visibility'
                    },
                    {
                        name: 'Sunset',
                        skyColors: ['#ff5722', '#ff7043', '#ff8a65', '#9575cd'],
                        lightIntensity: 0.6,
                        description: 'Golden hour, dramatic colors on peaks'
                    },
                    {
                        name: 'Night',
                        skyColors: ['#1a237e', '#283593', '#303f9f', '#000000'],
                        lightIntensity: 0.3,
                        description: 'Stars, moon glow, aurora borealis'
                    }
                ];
                
                this.weatherTypes = [
                    { name: 'Clear', description: 'Perfect visibility, dramatic shadows' },
                    { name: 'Cloudy', description: 'Clouds around peaks, softer light' },
                    { name: 'Snowy', description: 'Falling snow, winter atmosphere' },
                    { name: 'Stormy', description: 'Dark clouds, lightning, dramatic' }
                ];
                
                // Current states
                this.currentColors = this.locations[0].colors;
                this.currentSkyColors = this.timesOfDay[0].skyColors;
                this.currentMountainColors = this.locations[0].mountainColors;
                
                this.init();
            }
            
            init() {
                this.setupCanvas();
                this.setupEventListeners();
                this.createBackgroundElements();
                this.createInitialMountains();
                
                this.updateTimeDisplay();
                this.startAnimation();
                setInterval(() => this.updateTimeDisplay(), 1000);
                setInterval(() => this.spawnAmbientMountain(), 3000);
                
                // Update initial displays
                this.locationDisplay.textContent = this.locations[this.currentLocation].name;
                this.altitudeDisplay.textContent = this.locations[this.currentLocation].altitude;
                this.timeOfDayDisplay.textContent = this.timesOfDay[this.currentTimeOfDay].name;
                this.weatherDisplay.textContent = this.weatherTypes[this.currentWeather].name;
                this.updateBackground();
            }
            
            setupCanvas() {
                this.resizeCanvas();
                window.addEventListener('resize', () => this.resizeCanvas());
            }
            
            resizeCanvas() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }
            
            setupEventListeners() {
                // Prevent default touch behaviors
                document.addEventListener('touchstart', (e) => e.preventDefault(), { passive: false });
                document.addEventListener('touchmove', (e) => e.preventDefault(), { passive: false });
                document.addEventListener('touchend', (e) => e.preventDefault(), { passive: false });
                
                // Canvas interactions
                this.canvas.addEventListener('click', (e) => this.handleInteraction(e));
                this.canvas.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    const rect = this.canvas.getBoundingClientRect();
                    const touch = e.touches[0];
                    this.handleInteraction({ clientX: touch.clientX, clientY: touch.clientY, target: this.canvas });
                });
                
                // Control panel buttons
                document.getElementById('locationBtn').addEventListener('click', () => this.changeLocation());
                document.getElementById('timeBtn').addEventListener('click', () => this.changeTimeOfDay());
                document.getElementById('weatherBtn').addEventListener('click', () => this.changeWeather());
                document.getElementById('clearBtn').addEventListener('click', () => this.clearEffects());
            }
            
            updateTimeDisplay() {
                const now = new Date();
                const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                document.getElementById('currentTime').textContent = timeString;
            }
            
            changeLocation() {
                this.currentLocation = (this.currentLocation + 1) % this.locations.length;
                this.currentColors = this.locations[this.currentLocation].colors;
                this.currentMountainColors = this.locations[this.currentLocation].mountainColors;
                this.locationDisplay.textContent = this.locations[this.currentLocation].name;
                this.altitudeDisplay.textContent = this.locations[this.currentLocation].altitude;
                this.updateBackground();
                
                // Clear location-specific effects for smooth transition
                this.eagles = [];
                this.mountainGoats = [];
                this.createMountainRanges();
                
                // Add waterfalls for certain locations
                if (this.currentLocation === 0 || this.currentLocation === 3) {
                    this.createWaterfalls();
                }
            }
            
            changeTimeOfDay() {
                this.currentTimeOfDay = (this.currentTimeOfDay + 1) % this.timesOfDay.length;
                this.currentSkyColors = this.timesOfDay[this.currentTimeOfDay].skyColors;
                this.timeOfDayDisplay.textContent = this.timesOfDay[this.currentTimeOfDay].name;
                this.updateBackground();
            }
            
            changeWeather() {
                this.currentWeather = (this.currentWeather + 1) % this.weatherTypes.length;
                this.weatherDisplay.textContent = this.weatherTypes[this.currentWeather].name;
                this.isSnowing = this.weatherTypes[this.currentWeather].name === 'Snowy';
                
                if (this.weatherTypes[this.currentWeather].name === 'Cloudy') {
                    this.createCloudCover();
                } else if (this.weatherTypes[this.currentWeather].name === 'Stormy') {
                    this.createStormClouds();
                }
            }
            
            updateBackground() {
                const location = this.locations[this.currentLocation];
                const timeOfDay = this.timesOfDay[this.currentTimeOfDay];
                const gradient = `linear-gradient(180deg, ${timeOfDay.skyColors[0]} 0%, ${timeOfDay.skyColors[1]} 30%, ${location.colors[1]} 70%, ${location.colors[4]} 100%)`;
                document.body.style.background = gradient;
            }
            
            clearEffects() {
                this.eagles = [];
                this.mountainGoats = [];
                this.clouds = [];
                this.snowParticles = [];
                this.particles = [];
                this.lightningFlashes = [];
                
                // Create gentle clearing effect with mountain mist
                for (let i = 0; i < 15; i++) {
                    const x = Math.random() * this.canvas.width;
                    const y = Math.random() * this.canvas.height;
                    this.createMistSwirl(x, y);
                }
            }
            
            spawnAmbientMountain() {
                // Randomly spawn mountain elements
                if (Math.random() < 0.2 && this.eagles.length < 4) {
                    this.spawnEagle();
                }
                
                if (Math.random() < 0.1 && this.mountainGoats.length < 2) {
                    this.spawnMountainGoat();
                }
                
                if (Math.random() < 0.3 && this.clouds.length < 8) {
                    this.spawnDriftingCloud();
                }
                
                // Weather effects
                if (this.isSnowing && Math.random() < 0.9) {
                    this.spawnSnowflake();
                }
                
                // Night effects
                if (this.currentTimeOfDay === 3 && Math.random() < 0.1 && this.stars.length < 50) {
                    this.spawnStar();
                }
            }
            
            spawnSnowflake() {
                const snowflake = {
                    x: Math.random() * this.canvas.width,
                    y: -20,
                    vx: (Math.random() - 0.5) * 1.5 * this.windStrength,
                    vy: Math.random() * 1.5 + 0.5,
                    size: Math.random() * 4 + 2,
                    rotation: Math.random() * Math.PI * 2,
                    rotationSpeed: (Math.random() - 0.5) * 0.1,
                    life: 0,
                    maxLife: 800,
                    opacity: Math.random() * 0.8 + 0.2,
                    swayPhase: Math.random() * Math.PI * 2,
                    type: 'snow'
                };
                this.snowParticles.push(snowflake);
            }
            
            createCloudCover() {
                for (let i = 0; i < 12; i++) {
                    const cloud = {
                        x: Math.random() * this.canvas.width,
                        y: Math.random() * this.canvas.height * 0.4 + 50,
                        size: Math.random() * 80 + 60,
                        vx: (Math.random() - 0.5) * 0.3,
                        vy: (Math.random() - 0.5) * 0.1,
                        life: 0,
                        maxLife: 600,
                        opacity: Math.random() * 0.6 + 0.3,
                        type: 'cloud'
                    };
                    this.clouds.push(cloud);
                }
            }
            
            createStormClouds() {
                for (let i = 0; i < 8; i++) {
                    const stormCloud = {
                        x: Math.random() * this.canvas.width,
                        y: Math.random() * this.canvas.height * 0.3 + 20,
                        size: Math.random() * 120 + 100,
                        vx: (Math.random() - 0.5) * 0.8,
                        vy: (Math.random() - 0.5) * 0.2,
                        life: 0,
                        maxLife: 400,
                        opacity: Math.random() * 0.7 + 0.3,
                        color: '#455a64',
                        type: 'storm-cloud'
                    };
                    this.clouds.push(stormCloud);
                }
                
                // Add lightning effects
                if (Math.random() < 0.3) {
                    this.createLightning();
                }
            }
            
            createLightning() {
                const lightning = {
                    startX: Math.random() * this.canvas.width,
                    startY: Math.random() * this.canvas.height * 0.3,
                    branches: [],
                    life: 0,
                    maxLife: 8,
                    opacity: 1
                };
                
                // Generate lightning branches
                let currentX = lightning.startX;
                let currentY = lightning.startY;
                for (let i = 0; i < 6; i++) {
                    currentX += (Math.random() - 0.5) * 60;
                    currentY += Math.random() * 100 + 50;
                    lightning.branches.push({ x: currentX, y: currentY });
                }
                this.lightningFlashes.push(lightning);
            }
            
            createMountainRanges() {
                this.mountains = [];
                for (let layer = 0; layer < 4; layer++) {
                    const mountain = {
                        layer: layer,
                        peaks: [],
                        color: this.currentMountainColors[Math.min(layer, this.currentMountainColors.length - 1)],
                        baseY: this.canvas.height - (layer * 50 + 150),
                        parallaxSpeed: 1 - (layer * 0.2)
                    };
                    
                    // Generate peaks for this layer
                    const peakCount = 12 - layer * 2;
                    for (let i = 0; i <= peakCount; i++) {
                        const peak = {
                            x: (i / peakCount) * this.canvas.width * 1.2 - this.canvas.width * 0.1,
                            height: Math.random() * (200 - layer * 30) + (100 + layer * 50),
                            width: Math.random() * 150 + 100,
                            snowCap: layer < 2 && Math.random() < 0.8
                        };
                        mountain.peaks.push(peak);
                    }
                    
                    this.mountains.push(mountain);
                }
            }
            
            createWaterfalls() {
                const waterfallCount = Math.floor(Math.random() * 3) + 1;
                
                for (let i = 0; i < waterfallCount; i++) {
                    const waterfall = {
                        x: Math.random() * this.canvas.width,
                        startY: this.canvas.height - Math.random() * 400 - 200,
                        endY: this.canvas.height - 50,
                        width: Math.random() * 8 + 4,
                        flow: Math.random() * 0.3 + 0.7,
                        particles: [],
                        mist: []
                    };
                    
                    // Generate waterfall particles
                    for (let j = 0; j < 20; j++) {
                        waterfall.particles.push({
                            x: waterfall.x + (Math.random() - 0.5) * waterfall.width,
                            y: waterfall.startY + (j / 20) * (waterfall.endY - waterfall.startY),
                            vy: Math.random() * 2 + 3,
                            life: Math.random() * 100
                        });
                    }
                    
                    this.waterfalls.push(waterfall);
                }
            }
            
            handleInteraction(e) {
                const rect = this.canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Create gentle mountain interaction effects
                this.createMountainRipple(x, y);
                this.spawnMountainInteraction(x, y);
                
                // Create snow burst
                this.createSnowBurst(x, y);
                
                // Occasionally spawn mountain creatures
                if (Math.random() < 0.5) {
                    this.spawnEagle();
                }
                if (Math.random() < 0.3) {
                    this.spawnMountainGoat();
                }
                if (Math.random() < 0.6) {
                    this.spawnDriftingCloud();
                }
            }
            
            createMountainFlash() {
                // Subtle mountain interaction flash
                const flash = document.createElement('div');
                flash.style.cssText = `
                    position: fixed;
                    top: 0; left: 0;
                    width: 100%; height: 100%;
                    background: radial-gradient(circle, rgba(120, 144, 156, 0.2), transparent 60%);
                    pointer-events: none;
                    z-index: 1000;
                    opacity: 0;
                    animation: mountainFlash 0.4s ease-out;
                `;
                
                document.body.appendChild(flash);
                setTimeout(() => {
                    if (document.body.contains(flash)) document.body.removeChild(flash);
                }, 400);
            }
            
            spawnMountainInteraction(x, y) {
                const interactions = ['snow-burst', 'cloud-formation', 'mist-swirl', 'light-rays'];
                const interactionType = interactions[Math.floor(Math.random() * interactions.length)];
                
                if (interactionType === 'snow-burst') {
                    this.createSnowBurst(x, y);
                } else if (interactionType === 'cloud-formation') {
                    this.createCloudFormation(x, y);
                } else if (interactionType === 'mist-swirl') {
                    this.createMistSwirl(x, y);
                } else if (interactionType === 'light-rays') {
                    this.createLightRays(x, y);
                }
            }
            
            createCloudFormation(x, y) {
                for (let i = 0; i < 3; i++) {
                    const cloud = {
                        x: x + (Math.random() - 0.5) * 100,
                        y: y + (Math.random() - 0.5) * 50,
                        size: 0,
                        targetSize: Math.random() * 60 + 40,
                        vx: (Math.random() - 0.5) * 0.5,
                        vy: -Math.random() * 0.3 - 0.2,
                        life: 0,
                        maxLife: 400,
                        opacity: 0,
                        targetOpacity: Math.random() * 0.6 + 0.3,
                        type: 'forming-cloud'
                    };
                    
                    setTimeout(() => {
                        this.clouds.push(cloud);
                    }, i * 200);
                }
            }
            
            createMistSwirl(x, y) {
                for (let i = 0; i < 8; i++) {
                    const angle = (i / 8) * Math.PI * 2;
                    const speed = Math.random() * 1.5 + 0.5;
                    const mist = {
                        x: x,
                        y: y,
                        vx: Math.cos(angle) * speed * 0.3,
                        vy: Math.sin(angle) * speed * 0.3 - 0.5,
                        size: Math.random() * 30 + 20,
                        life: 0,
                        maxLife: 120,
                        opacity: Math.random() * 0.4 + 0.2,
                        color: 'rgba(220, 220, 255, 0.3)',
                        swirl: 0
                    };
                    
                    this.particles.push(mist);
                }
            }
            
            createLightRays(x, y) {
                for (let i = 0; i < 12; i++) {
                    const angle = (i / 12) * Math.PI * 2;
                    const length = Math.random() * 100 + 50;
                    const ray = {
                        x: x,
                        y: y,
                        endX: x + Math.cos(angle) * length,
                        endY: y + Math.sin(angle) * length,
                        life: 0,
                        maxLife: 40,
                        opacity: Math.random() * 0.6 + 0.3,
                        width: Math.random() * 2 + 1,
                        color: this.timesOfDay[this.currentTimeOfDay].skyColors[0],
                        type: 'light-ray'
                    };
                    this.particles.push(ray);
                }
            }
            
            createSnowBurst(x, y) {
                for (let i = 0; i < 20; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 2 + 1;
                    const snow = {
                        x: x,
                        y: y,
                        vx: Math.cos(angle) * speed,
                        vy: Math.sin(angle) * speed - 1,
                        size: Math.random() * 3 + 1,
                        life: 0,
                        maxLife: 180,
                        opacity: Math.random() * 0.8 + 0.2,
                        rotation: Math.random() * Math.PI * 2,
                        rotationSpeed: (Math.random() - 0.5) * 0.1,
                        gravity: 0.02,
                        type: 'burst-snow'
                    };
                    this.particles.push(snow);
                }
            }
            
            createMountainRipple(x, y) {
                for (let i = 0; i < 3; i++) {
                    const ripple = {
                        x: x,
                        y: y,
                        radius: 0,
                        maxRadius: 60 + i * 25,
                        life: 0,
                        maxLife: 35 + i * 10,
                        isRipple: true,
                        color: this.currentColors[2],
                        opacity: 0.4 - i * 0.1,
                        type: 'mountain-ripple'
                    };
                    
                    setTimeout(() => {
                        this.particles.push(ripple);
                    }, i * 40);
                }
            }
            
            spawnEagle() {
                const eagle = {
                    x: Math.random() < 0.5 ? -80 : this.canvas.width + 80,
                    y: Math.random() * this.canvas.height * 0.6 + 80,
                    targetX: Math.random() * this.canvas.width,
                    targetY: Math.random() * this.canvas.height * 0.4 + 100,
                    vx: 0,
                    vy: 0,
                    speed: Math.random() * 1.5 + 1,
                    life: 0,
                    maxLife: 800,
                    size: Math.random() * 12 + 18,
                    wingPhase: Math.random() * Math.PI * 2,
                    wingSpeed: 0.15,
                    soarPhase: Math.random() * Math.PI * 2,
                    thermalRadius: Math.random() * 100 + 80,
                    circling: Math.random() < 0.7,
                    path: []
                };
                this.eagles.push(eagle);
            }
            
            spawnMountainGoat() {
                const goat = {
                    x: Math.random() * this.canvas.width,
                    y: this.canvas.height - Math.random() * 300 - 200,
                    targetX: Math.random() * this.canvas.width,
                    targetY: this.canvas.height - Math.random() * 250 - 180,
                    speed: Math.random() * 0.8 + 0.4,
                    life: 0,
                    maxLife: 1200,
                    size: Math.random() * 6 + 8,
                    direction: Math.random() < 0.5 ? 1 : -1,
                    climbing: false,
                    ledgeY: 0,
                    restTime: 0
                };
                this.mountainGoats.push(goat);
            }
            
            spawnDriftingCloud() {
                const cloud = {
                    x: Math.random() < 0.5 ? -100 : this.canvas.width + 100,
                    y: Math.random() * this.canvas.height * 0.5 + 50,
                    vx: (Math.random() - 0.5) * 0.4,
                    vy: (Math.random() - 0.5) * 0.1,
                    size: Math.random() * 80 + 60,
                    life: 0,
                    maxLife: 1000,
                    opacity: Math.random() * 0.7 + 0.3,
                    puffiness: Math.random() * 0.3 + 0.7,
                    type: 'drifting'
                };
                this.clouds.push(cloud);
            }
            
            spawnStar() {
                const star = {
                    x: Math.random() * this.canvas.width,
                    y: Math.random() * this.canvas.height * 0.7,
                    size: Math.random() * 2 + 0.5,
                    brightness: Math.random(),
                    twinkleSpeed: Math.random() * 0.05 + 0.02,
                    twinklePhase: Math.random() * Math.PI * 2,
                    life: 0,
                    maxLife: Infinity
                };
                this.stars.push(star);
            }
            
            createBackgroundElements() {
                // Create atmospheric particles (mist, dust, light motes)
                const particleCount = 80;
                for (let i = 0; i < particleCount; i++) {
                    const particle = {
                        x: Math.random() * this.canvas.width,
                        y: Math.random() * this.canvas.height,
                        size: Math.random() * 1 + 0.3,
                        vx: (Math.random() - 0.5) * 0.15,
                        vy: (Math.random() - 0.5) * 0.1,
                        color: 'rgba(255, 255, 255, 0.2)',
                        life: 0,
                        maxLife: Infinity,
                        float: Math.random() * Math.PI * 2,
                        floatSpeed: 0.008 + Math.random() * 0.015,
                        type: 'atmospheric'
                    };
                    this.particles.push(particle);
                }
            }
            
            createInitialMountains() {
                // Initialize mountain ranges
                this.createMountainRanges();
                
                // Add some initial clouds
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => {
                        this.spawnDriftingCloud();
                    }, i * 1000);
                }
                
                // Add waterfalls for certain locations
                if (this.currentLocation === 0 || this.currentLocation === 3) {
                    this.createWaterfalls();
                }
            }
            
            updateAnimations() {
                // Update eagles
                this.eagles = this.eagles.filter(eagle => {
                    eagle.life++;
                    eagle.wingPhase += eagle.wingSpeed;
                    eagle.soarPhase += 0.02;
                    
                    if (eagle.circling) {
                        // Circular soaring pattern
                        const centerX = eagle.targetX;
                        const centerY = eagle.targetY;
                        eagle.x = centerX + Math.cos(eagle.soarPhase) * eagle.thermalRadius;
                        eagle.y = centerY + Math.sin(eagle.soarPhase) * eagle.thermalRadius * 0.3;
                        
                        // Change direction occasionally
                        if (Math.random() < 0.01) {
                            eagle.targetX = Math.random() * this.canvas.width;
                            eagle.targetY = Math.random() * this.canvas.height * 0.4 + 100;
                            eagle.circling = Math.random() < 0.8;
                        }
                    } else {
                        // Direct flight to target
                        const dx = eagle.targetX - eagle.x;
                        const dy = eagle.targetY - eagle.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance > 10) {
                            eagle.vx = (dx / distance) * eagle.speed;
                            eagle.vy = (dy / distance) * eagle.speed;
                            eagle.x += eagle.vx + Math.sin(eagle.soarPhase * 2) * 1;
                            eagle.y += eagle.vy + Math.cos(eagle.soarPhase * 1.5) * 0.5;
                        } else {
                            eagle.targetX = Math.random() * this.canvas.width;
                            eagle.targetY = Math.random() * this.canvas.height * 0.4 + 100;
                            eagle.circling = Math.random() < 0.7;
                        }
                    }
                    
                    // Record flight path
                    eagle.path.push({ x: eagle.x, y: eagle.y });
                    if (eagle.path.length > 20) eagle.path.shift();
                    
                    return eagle.life < eagle.maxLife && eagle.x > -200 && eagle.x < this.canvas.width + 200;
                });
                
                // Update mountain goats
                this.mountainGoats = this.mountainGoats.filter(goat => {
                    goat.life++;
                    
                    if (goat.restTime > 0) {
                        goat.restTime--;
                        return true;
                    }
                    
                    // Move towards target
                    const dx = goat.targetX - goat.x;
                    const dy = goat.targetY - goat.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance > 8) {
                        goat.x += (dx / distance) * goat.speed;
                        goat.y += (dy / distance) * goat.speed;
                        goat.direction = dx > 0 ? 1 : -1;
                    } else {
                        // Find new ledge
                        goat.targetX = Math.random() * this.canvas.width;
                        goat.targetY = this.canvas.height - Math.random() * 250 - 180;
                        goat.restTime = Math.random() * 60 + 30;
                    }
                    
                    return goat.life < goat.maxLife;
                });
                
                // Update clouds
                this.clouds = this.clouds.filter(cloud => {
                    cloud.life++;
                    
                    // Handle different cloud types
                    if (cloud.type === 'forming-cloud') {
                        if (cloud.size < cloud.targetSize) {
                            cloud.size += 1;
                        }
                        if (cloud.opacity < cloud.targetOpacity) {
                            cloud.opacity += 0.02;
                        }
                    }
                    
                    // Movement
                    if (cloud.vx !== undefined) {
                        cloud.x += cloud.vx;
                        cloud.y += cloud.vy || 0;
                    }
                    
                    return cloud.life < cloud.maxLife && cloud.x > -200 && cloud.x < this.canvas.width + 200;
                });
                
                // Update snow particles
                this.snowParticles = this.snowParticles.filter(snow => {
                    snow.life++;
                    
                    // Snow physics
                    snow.swayPhase += 0.05;
                    snow.vx += Math.sin(snow.swayPhase) * 0.01 * this.windStrength;
                    snow.x += snow.vx;
                    snow.y += snow.vy;
                    snow.rotation += snow.rotationSpeed;
                    
                    // Wind effect
                    snow.vx += (Math.random() - 0.5) * this.windStrength * 0.005;
                    
                    return snow.life < snow.maxLife && snow.y < this.canvas.height + 20;
                });
                
                // Update stars (for night time)
                this.stars.forEach(star => {
                    star.twinklePhase += star.twinkleSpeed;
                });
                
                // Update waterfalls
                this.waterfalls.forEach(waterfall => {
                    waterfall.particles.forEach(particle => {
                        particle.y += particle.vy;
                        particle.life++;
                        
                        // Reset particle if it reaches bottom
                        if (particle.y >= waterfall.endY) {
                            particle.y = waterfall.startY;
                            particle.x = waterfall.x + (Math.random() - 0.5) * waterfall.width;
                            particle.life = 0;
                        }
                    });
                });
                
                // Update lightning flashes
                this.lightningFlashes = this.lightningFlashes.filter(lightning => {
                    lightning.life++;
                    lightning.opacity = Math.max(0, 1 - (lightning.life / lightning.maxLife));
                    return lightning.life < lightning.maxLife;
                });
                
                // Update all other particles
                this.particles = this.particles.filter(particle => {
                    if (particle.maxLife !== Infinity) {
                        particle.life++;
                    }
                    
                    // Handle different particle types
                    if (particle.isRipple || particle.type === 'mountain-ripple') {
                        particle.radius = (particle.life / particle.maxLife) * particle.maxRadius;
                        particle.alpha = particle.opacity * (1 - (particle.life / particle.maxLife));
                        return particle.life < particle.maxLife;
                    }
                    
                    if (particle.type === 'light-ray') {
                        particle.opacity = Math.max(0, 1 - (particle.life / particle.maxLife));
                        return particle.life < particle.maxLife;
                    }
                    
                    // Regular particle movement
                    if (particle.vx !== undefined) {
                        particle.x += particle.vx;
                        particle.y += particle.vy;
                        
                        // Add gravity for snow bursts
                        if (particle.gravity) {
                            particle.vy += particle.gravity;
                        }
                        
                        // Special handling for mist
                        if (particle.swirl !== undefined) {
                            particle.swirl += 0.1;
                            particle.x += Math.sin(particle.swirl) * 0.5;
                        }
                        
                        // Floating effect for atmospheric particles
                        if (particle.float !== undefined) {
                            particle.float += particle.floatSpeed || 0.015;
                            particle.y += Math.sin(particle.float) * 0.15;
                            particle.x += Math.cos(particle.float * 0.8) * 0.08;
                            
                            // Wrap around screen for infinite particles
                            if (particle.x > this.canvas.width) particle.x = 0;
                            if (particle.x < 0) particle.x = this.canvas.width;
                            if (particle.y > this.canvas.height) particle.y = 0;
                            if (particle.y < 0) particle.y = this.canvas.height;
                        }
                    }
                    
                    // Update rotation for snow particles
                    if (particle.rotationSpeed) {
                        particle.rotation += particle.rotationSpeed;
                    }
                    
                    // Fade out for finite particles
                    if (particle.maxLife !== Infinity && !particle.type?.includes('ripple')) {
                        particle.opacity = Math.max(0, 1 - (particle.life / particle.maxLife));
                        return particle.life < particle.maxLife;
                    }
                    
                    return true;
                });
            }
            
            render() {
                // Clear canvas
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Apply lighting intensity based on time of day
                const lightIntensity = this.timesOfDay[this.currentTimeOfDay].lightIntensity;
                
                // Render mountain ranges (back to front for proper layering)
                this.mountains.slice().reverse().forEach(mountain => {
                    this.ctx.save();
                    
                    // Apply atmospheric perspective (distant mountains are lighter/bluer)
                    const atmosphericFactor = 1 - (mountain.layer * 0.2);
                    let mountainColor = mountain.color;
                    
                    // Adjust color based on time of day
                    if (this.currentTimeOfDay === 0) { // Sunrise
                        mountainColor = this.blendColors(mountainColor, '#ffb6c1', 0.3 * atmosphericFactor);
                    } else if (this.currentTimeOfDay === 2) { // Sunset
                        mountainColor = this.blendColors(mountainColor, '#ff8c69', 0.4 * atmosphericFactor);
                    } else if (this.currentTimeOfDay === 3) { // Night
                        mountainColor = this.blendColors(mountainColor, '#1a237e', 0.6 * atmosphericFactor);
                    }
                    
                    this.ctx.fillStyle = mountainColor;
                    this.ctx.globalAlpha = 0.8 + (mountain.layer * 0.05);
                    
                    // Draw mountain silhouette
                    this.ctx.beginPath();
                    this.ctx.moveTo(0, this.canvas.height);
                    
                    mountain.peaks.forEach((peak, index) => {
                        if (index === 0) {
                            this.ctx.lineTo(peak.x, mountain.baseY - peak.height);
                        } else {
                            // Create natural mountain curves
                            const prevPeak = mountain.peaks[index - 1];
                            const midX = (prevPeak.x + peak.x) / 2;
                            const midY = Math.min(mountain.baseY - prevPeak.height, mountain.baseY - peak.height) + 20;
                            
                            this.ctx.quadraticCurveTo(midX, midY, peak.x, mountain.baseY - peak.height);
                        }
                    });
                    
                    this.ctx.lineTo(this.canvas.width, this.canvas.height);
                    this.ctx.lineTo(0, this.canvas.height);
                    this.ctx.fill();
                    
                    // Add snow caps for close mountains
                    if (mountain.layer < 2) {
                        this.ctx.fillStyle = '#ffffff';
                        this.ctx.globalAlpha = 0.9;
                        
                        mountain.peaks.forEach(peak => {
                            if (peak.snowCap) {
                                const snowHeight = peak.height * 0.2;
                                this.ctx.beginPath();
                                this.ctx.moveTo(peak.x - peak.width * 0.1, mountain.baseY - peak.height + snowHeight);
                                this.ctx.lineTo(peak.x, mountain.baseY - peak.height);
                                this.ctx.lineTo(peak.x + peak.width * 0.1, mountain.baseY - peak.height + snowHeight);
                                this.ctx.fill();
                            }
                        });
                    }
                    
                    this.ctx.restore();
                });
                
                // Render waterfalls
                this.waterfalls.forEach(waterfall => {
                    this.ctx.save();
                    
                    // Waterfall stream
                    this.ctx.strokeStyle = 'rgba(173, 216, 230, 0.7)';
                    this.ctx.lineWidth = waterfall.width;
                    this.ctx.lineCap = 'round';
                    
                    this.ctx.beginPath();
                    this.ctx.moveTo(waterfall.x, waterfall.startY);
                    this.ctx.lineTo(waterfall.x + Math.sin(Date.now() * 0.001) * 3, waterfall.endY);
                    this.ctx.stroke();
                    
                    // Waterfall particles
                    this.ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                    waterfall.particles.forEach(particle => {
                        this.ctx.globalAlpha = Math.max(0, 1 - (particle.life / 100));
                        this.ctx.beginPath();
                        this.ctx.arc(particle.x, particle.y, 1, 0, Math.PI * 2);
                        this.ctx.fill();
                    });
                    
                    this.ctx.restore();
                });
                
                // Render clouds
                this.clouds.forEach(cloud => {
                    this.ctx.save();
                    
                    this.ctx.globalAlpha = cloud.opacity || 0.6;
                    
                    // Different rendering for storm clouds
                    if (cloud.type === 'storm-cloud') {
                        this.ctx.fillStyle = cloud.color || '#455a64';
                    } else {
                        this.ctx.fillStyle = '#ffffff';
                    }
                    
                    // Draw fluffy cloud shapes
                    const cloudPuffs = 6;
                    for (let i = 0; i < cloudPuffs; i++) {
                        const angle = (i / cloudPuffs) * Math.PI * 2;
                        const puffX = cloud.x + Math.cos(angle) * cloud.size * 0.3;
                        const puffY = cloud.y + Math.sin(angle) * cloud.size * 0.15;
                        const puffSize = cloud.size * (0.4 + Math.sin(i) * 0.2);
                        
                        this.ctx.beginPath();
                        this.ctx.arc(puffX, puffY, puffSize, 0, Math.PI * 2);
                        this.ctx.fill();
                    }
                    
                    this.ctx.restore();
                });
                
                // Render eagles
                this.eagles.forEach(eagle => {
                    this.ctx.save();
                    
                    this.ctx.translate(eagle.x, eagle.y);
                    
                    // Determine eagle direction based on velocity
                    const direction = eagle.vx < 0 ? -1 : 1;
                    this.ctx.scale(direction, 1);
                    
                    // Eagle body
                    this.ctx.fillStyle = '#8B4513';
                    this.ctx.beginPath();
                    this.ctx.ellipse(0, 0, eagle.size * 0.8, eagle.size * 0.4, 0, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // Wings - soaring position
                    const wingSpread = Math.sin(eagle.wingPhase) * 0.2 + 0.8;
                    this.ctx.strokeStyle = '#654321';
                    this.ctx.lineWidth = 3;
                    this.ctx.lineCap = 'round';
                    
                    // Wing spans
                    this.ctx.beginPath();
                    this.ctx.moveTo(-eagle.size * 0.3, 0);
                    this.ctx.lineTo(-eagle.size * wingSpread, -eagle.size * 0.2);
                    this.ctx.moveTo(eagle.size * 0.3, 0);
                    this.ctx.lineTo(eagle.size * wingSpread, -eagle.size * 0.2);
                    this.ctx.stroke();
                    
                    // Head
                    this.ctx.fillStyle = '#ffffff';
                    this.ctx.beginPath();
                    this.ctx.arc(eagle.size * 0.6, -eagle.size * 0.2, eagle.size * 0.2, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    this.ctx.restore();
                });
                
                // Render mountain goats
                this.mountainGoats.forEach(goat => {
                    this.ctx.save();
                    
                    this.ctx.translate(goat.x, goat.y);
                    this.ctx.scale(goat.direction, 1);
                    
                    // Goat body
                    this.ctx.fillStyle = '#f5f5dc';
                    this.ctx.beginPath();
                    this.ctx.ellipse(0, 0, goat.size, goat.size * 0.6, 0, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // Horns
                    this.ctx.strokeStyle = '#8B4513';
                    this.ctx.lineWidth = 2;
                    this.ctx.beginPath();
                    this.ctx.moveTo(-goat.size * 0.3, -goat.size * 0.4);
                    this.ctx.lineTo(-goat.size * 0.5, -goat.size * 0.8);
                    this.ctx.moveTo(goat.size * 0.3, -goat.size * 0.4);
                    this.ctx.lineTo(goat.size * 0.5, -goat.size * 0.8);
                    this.ctx.stroke();
                    
                    this.ctx.restore();
                });
                
                // Render stars (night time only)
                if (this.currentTimeOfDay === 3) {
                    this.stars.forEach(star => {
                        this.ctx.save();
                        
                        const twinkle = Math.sin(star.twinklePhase) * 0.3 + 0.7;
                        this.ctx.globalAlpha = star.brightness * twinkle;
                        this.ctx.fillStyle = '#ffffff';
                        
                        this.ctx.beginPath();
                        this.ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                        this.ctx.fill();
                        
                        this.ctx.restore();
                    });
                }
                
                // Render snow particles
                this.snowParticles.forEach(snow => {
                    this.ctx.save();
                    
                    this.ctx.globalAlpha = snow.opacity;
                    this.ctx.translate(snow.x, snow.y);
                    this.ctx.rotate(snow.rotation);
                    
                    this.ctx.fillStyle = '#ffffff';
                    this.ctx.strokeStyle = '#e3f2fd';
                    this.ctx.lineWidth = 0.5;
                    
                    // Draw snowflake shape
                    const size = snow.size;
                    this.ctx.beginPath();
                    for (let i = 0; i < 6; i++) {
                        this.ctx.moveTo(0, 0);
                        this.ctx.lineTo(0, -size);
                        this.ctx.rotate(Math.PI / 3);
                    }
                    this.ctx.stroke();
                    
                    this.ctx.restore();
                });
                
                // Render lightning
                this.lightningFlashes.forEach(lightning => {
                    this.ctx.save();
                    
                    this.ctx.globalAlpha = lightning.opacity;
                    this.ctx.strokeStyle = '#ffffff';
                    this.ctx.lineWidth = 3;
                    this.ctx.lineCap = 'round';
                    
                    this.ctx.beginPath();
                    this.ctx.moveTo(lightning.startX, lightning.startY);
                    lightning.branches.forEach(branch => {
                        this.ctx.lineTo(branch.x, branch.y);
                    });
                    this.ctx.stroke();
                    
                    this.ctx.restore();
                });
                
                // Render other particles (mist, light rays, etc.)
                this.particles.forEach(particle => {
                    this.ctx.save();
                    
                    if (particle.isRipple || particle.type === 'mountain-ripple') {
                        this.ctx.globalAlpha = particle.alpha;
                        this.ctx.strokeStyle = particle.color;
                        this.ctx.lineWidth = 2;
                        this.ctx.beginPath();
                        this.ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                        this.ctx.stroke();
                    } else if (particle.type === 'light-ray') {
                        this.ctx.globalAlpha = particle.opacity;
                        this.ctx.strokeStyle = particle.color;
                        this.ctx.lineWidth = particle.width;
                        this.ctx.lineCap = 'round';
                        
                        this.ctx.beginPath();
                        this.ctx.moveTo(particle.x, particle.y);
                        this.ctx.lineTo(particle.endX, particle.endY);
                        this.ctx.stroke();
                    } else {
                        this.ctx.globalAlpha = particle.opacity || 0.8;
                        
                        // Handle mist with gradients
                        if (particle.color?.includes('rgba(220, 220, 255')) {
                            const gradient = this.ctx.createRadialGradient(
                                particle.x, particle.y, 0,
                                particle.x, particle.y, particle.size
                            );
                            gradient.addColorStop(0, 'rgba(220, 220, 255, 0.4)');
                            gradient.addColorStop(1, 'rgba(220, 220, 255, 0)');
                            this.ctx.fillStyle = gradient;
                        } else {
                            this.ctx.fillStyle = particle.color;
                        }
                        
                        // Rotate snow burst particles
                        if (particle.type === 'burst-snow' && particle.rotation) {
                            this.ctx.translate(particle.x, particle.y);
                            this.ctx.rotate(particle.rotation);
                            
                            // Draw simple snowflake
                            this.ctx.strokeStyle = '#ffffff';
                            this.ctx.lineWidth = 1;
                            this.ctx.beginPath();
                            this.ctx.moveTo(-particle.size, 0);
                            this.ctx.lineTo(particle.size, 0);
                            this.ctx.moveTo(0, -particle.size);
                            this.ctx.lineTo(0, particle.size);
                            this.ctx.stroke();
                        } else {
                            this.ctx.beginPath();
                            this.ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                            this.ctx.fill();
                        }
                    }
                    
                    this.ctx.restore();
                });
            }
            
            // Utility function to blend colors
            blendColors(color1, color2, ratio) {
                // Simple color blending implementation
                const hex = color => {
                    if (color.startsWith('#')) return color;
                    // Convert rgb to hex - simplified version
                    return '#ffffff'; // Placeholder
                };
                
                return color1; // Simplified for now - in a real app you'd want proper color mixing
            }
            
            startAnimation() {
                const animate = () => {
                    this.updateAnimations();
                    this.render();
                    requestAnimationFrame(animate);
                };
                animate();
            }
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new MountainEnvironment();
        });
    </script>
</body>
</html>