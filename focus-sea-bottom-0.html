<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Underwater Reef - Calming Experience</title>
    <style>
        :root {
            --ocean-start: #001f3f;
            --ocean-end: #4ECDC4;
            --fish-colors: #FFD700, #FF6B35, #FF006E, #8338EC, #00F5FF;
            --coral-colors: #FF006E, #8338EC, #FB5607, #06FFA5;
            --seaweed-dark: #0A5F38;
            --seaweed-light: #134D2B;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        #ocean-scene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #001f3f 0%, #003d5c 30%, #4ECDC4 100%);
            transition: background 1s ease;
        }

        .light-rays {
            position: absolute;
            top: -10%;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.3;
        }

        .light-ray {
            position: absolute;
            top: -50%;
            width: 100px;
            height: 200%;
            background: linear-gradient(to bottom, 
                rgba(255, 255, 255, 0.4) 0%, 
                rgba(255, 255, 255, 0.1) 50%, 
                rgba(255, 255, 255, 0) 100%);
            filter: blur(20px);
            animation: rayFloat 12s ease-in-out infinite;
            transform-origin: top center;
        }

        @keyframes rayFloat {
            0%, 100% { opacity: 0.2; transform: translateX(0) rotate(-5deg); }
            50% { opacity: 0.4; transform: translateX(30px) rotate(5deg); }
        }

        .ocean-floor {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 25%;
            background: linear-gradient(to bottom, transparent, rgba(0, 20, 40, 0.6));
        }

        .coral-container {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 20%;
            pointer-events: none;
        }

        .coral {
            position: absolute;
            bottom: 0;
        }

        .seaweed-container {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 40%;
            pointer-events: none;
        }

        .seaweed {
            position: absolute;
            bottom: 0;
            width: 40px;
            background: linear-gradient(to top, #0A5F38, #134D2B);
            border-radius: 20px;
            transform-origin: bottom center;
        }

        .seaweed.tall { height: 150px; }
        .seaweed.medium { height: 100px; }
        .seaweed.short { height: 60px; }

        .seaweed-1 { animation: sway1 4s ease-in-out infinite; }
        .seaweed-2 { animation: sway2 3.5s ease-in-out infinite; }
        .seaweed-3 { animation: sway3 4.5s ease-in-out infinite; }

        @keyframes sway1 {
            0%, 100% { transform: rotate(-8deg); }
            50% { transform: rotate(8deg); }
        }

        @keyframes sway2 {
            0%, 100% { transform: rotate(-10deg); }
            50% { transform: rotate(10deg); }
        }

        @keyframes sway3 {
            0%, 100% { transform: rotate(-6deg); }
            50% { transform: rotate(6deg); }
        }

        .bubble-container {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .bubble {
            position: absolute;
            bottom: -50px;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.3));
            border-radius: 50%;
            opacity: 0.6;
        }

        .fish {
            position: absolute;
            font-size: 40px;
            transition: transform 0.3s ease;
            filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
        }

        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            animation: particleFloat 20s linear infinite;
        }

        @keyframes particleFloat {
            0% { transform: translate(0, 100vh) scale(1); opacity: 0; }
            10% { opacity: 0.5; }
            90% { opacity: 0.5; }
            100% { transform: translate(50px, -100px) scale(0.5); opacity: 0; }
        }

        .settings-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .settings-toggle:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: rotate(90deg);
        }

        .settings-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100%;
            background: rgba(0, 31, 63, 0.9);
            backdrop-filter: blur(20px);
            border-left: 1px solid rgba(255, 255, 255, 0.2);
            padding: 30px;
            overflow-y: auto;
            transition: right 0.4s ease;
            z-index: 999;
            color: white;
        }

        .settings-panel.open {
            right: 0;
        }

        .settings-panel h2 {
            margin-bottom: 30px;
            font-size: 24px;
            font-weight: 600;
        }

        .control-group {
            margin-bottom: 25px;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
            opacity: 0.9;
        }

        .control-group input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            -webkit-appearance: none;
        }

        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #4ECDC4;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .control-group input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #4ECDC4;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .control-group select {
            width: 100%;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 14px;
            cursor: pointer;
            outline: none;
        }

        .control-group select option {
            background: #001f3f;
            color: white;
        }

        .btn {
            width: 100%;
            padding: 12px;
            margin-top: 10px;
            background: rgba(78, 205, 196, 0.3);
            border: 1px solid rgba(78, 205, 196, 0.5);
            border-radius: 8px;
            color: white;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: rgba(78, 205, 196, 0.5);
            transform: translateY(-2px);
        }

        .btn-primary {
            background: rgba(78, 205, 196, 0.5);
            border: 1px solid rgba(78, 205, 196, 0.7);
        }

        .btn-primary:hover {
            background: rgba(78, 205, 196, 0.7);
        }

        .value-display {
            display: inline-block;
            margin-left: 10px;
            color: #4ECDC4;
            font-weight: 600;
        }

        .scenery-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        .scenery-btn {
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .scenery-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #4ECDC4;
        }

        .scenery-btn.active {
            background: rgba(78, 205, 196, 0.3);
            border-color: #4ECDC4;
        }

        @media (max-width: 768px) {
            .settings-panel {
                width: 100%;
                right: -100%;
            }
        }
    </style>
</head>
<body>
    <div id="ocean-scene">
        <div class="light-rays" id="lightRays"></div>
        <div class="particles" id="particles"></div>
        <div class="bubble-container" id="bubbleContainer"></div>
        <div id="fishContainer"></div>
        <div class="seaweed-container" id="seaweedContainer"></div>
        <div class="coral-container" id="coralContainer"></div>
        <div class="ocean-floor"></div>
    </div>

    <div class="settings-toggle" id="settingsToggle">‚öôÔ∏è</div>

    <div class="settings-panel" id="settingsPanel">
        <h2>Reef Settings</h2>

        <div class="control-group">
            <label>Fish Count <span class="value-display" id="fishCountValue">8</span></label>
            <input type="range" id="fishCount" min="0" max="20" value="8">
        </div>

        <div class="control-group">
            <label>Bubble Intensity <span class="value-display" id="bubbleIntensityValue">Medium</span></label>
            <input type="range" id="bubbleIntensity" min="1" max="3" value="2">
        </div>

        <div class="control-group">
            <label>Animation Speed <span class="value-display" id="animSpeedValue">Normal</span></label>
            <input type="range" id="animSpeed" min="0.5" max="2" step="0.5" value="1">
        </div>

        <div class="control-group">
            <label>Light Intensity <span class="value-display" id="lightIntensityValue">Normal</span></label>
            <input type="range" id="lightIntensity" min="1" max="3" value="2">
        </div>

        <div class="control-group">
            <label>Seaweed Density <span class="value-display" id="seaweedDensityValue">5</span></label>
            <input type="range" id="seaweedDensity" min="0" max="10" value="5">
        </div>

        <div class="control-group">
            <label>Background Theme</label>
            <select id="bgTheme">
                <option value="deep-blue">Deep Blue</option>
                <option value="turquoise">Turquoise</option>
                <option value="twilight">Twilight</option>
                <option value="clear-water">Clear Water</option>
            </select>
        </div>

        <div class="control-group">
            <label>Sound Effects</label>
            <button class="btn" id="soundToggle">üîá Sound Off</button>
        </div>

        <h2 style="margin-top: 30px; margin-bottom: 15px; font-size: 18px;">Change Scenery</h2>
        <div class="scenery-buttons">
            <button class="scenery-btn active" data-scenery="tropical">üê† Tropical Reef</button>
            <button class="scenery-btn" data-scenery="deep">üåä Deep Ocean</button>
            <button class="scenery-btn" data-scenery="kelp">üåø Kelp Forest</button>
            <button class="scenery-btn" data-scenery="sunset">üåÖ Sunset Reef</button>
        </div>

        <button class="btn btn-primary" id="fullscreenBtn">‚õ∂ Toggle Fullscreen</button>
    </div>

    <script>
        // Configuration
        const config = {
            fishCount: 8,
            bubbleIntensity: 2,
            animSpeed: 1,
            lightIntensity: 2,
            seaweedDensity: 5,
            soundEnabled: false,
            currentScenery: 'tropical'
        };

        const fishEmojis = ['üê†', 'üêü', 'üê°', 'ü¶à', 'üêô'];
        const fishColors = ['#FFD700', '#FF6B35', '#FF006E', '#8338EC', '#00F5FF'];
        
        let fishes = [];
        let bubbles = [];
        let audioContext = null;
        let isAudioPlaying = false;

        // Scenery themes
        const sceneryThemes = {
            tropical: {
                background: 'linear-gradient(to bottom, #001f3f 0%, #003d5c 30%, #4ECDC4 100%)',
                lightIntensity: 0.4,
                colors: 'vibrant'
            },
            deep: {
                background: 'linear-gradient(to bottom, #000814 0%, #001d3d 50%, #003566 100%)',
                lightIntensity: 0.15,
                colors: 'muted'
            },
            kelp: {
                background: 'linear-gradient(to bottom, #0a4d3c 0%, #1a5f4f 40%, #2d8b70 100%)',
                lightIntensity: 0.25,
                colors: 'cool'
            },
            sunset: {
                background: 'linear-gradient(to bottom, #d4145a 0%, #fbb034 40%, #9b59b6 100%)',
                lightIntensity: 0.5,
                colors: 'warm'
            }
        };

        // Initialize scene
        function init() {
            createLightRays();
            createParticles();
            createSeaweed();
            createCoral();
            createFish();
            startBubbles();
            setupEventListeners();
            animateFish();
            setupMouseInteraction();
        }

        // Create light rays
        function createLightRays() {
            const container = document.getElementById('lightRays');
            container.innerHTML = '';
            const rayCount = 5;
            for (let i = 0; i < rayCount; i++) {
                const ray = document.createElement('div');
                ray.className = 'light-ray';
                ray.style.left = `${(i * 20) + Math.random() * 10}%`;
                ray.style.animationDelay = `${i * -2}s`;
                ray.style.animationDuration = `${10 + Math.random() * 4}s`;
                container.appendChild(ray);
            }
        }

        // Create floating particles
        function createParticles() {
            const container = document.getElementById('particles');
            container.innerHTML = '';
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 20}s`;
                particle.style.animationDuration = `${15 + Math.random() * 10}s`;
                container.appendChild(particle);
            }
        }

        // Create seaweed
        function createSeaweed() {
            const container = document.getElementById('seaweedContainer');
            container.innerHTML = '';
            const heights = ['tall', 'medium', 'short'];
            const anims = ['seaweed-1', 'seaweed-2', 'seaweed-3'];
            
            for (let i = 0; i < config.seaweedDensity; i++) {
                const seaweed = document.createElement('div');
                seaweed.className = `seaweed ${heights[Math.floor(Math.random() * heights.length)]} ${anims[Math.floor(Math.random() * anims.length)]}`;
                seaweed.style.left = `${(i / config.seaweedDensity) * 100 + Math.random() * 5}%`;
                seaweed.style.animationDuration = `${3 + Math.random() * 2}s`;
                container.appendChild(seaweed);
            }
        }

        // Create coral
        function createCoral() {
            const container = document.getElementById('coralContainer');
            container.innerHTML = '';
            const coralShapes = ['ü™∏', 'üêö', '‚≠ê'];
            const coralColors = ['#FF006E', '#8338EC', '#FB5607', '#06FFA5'];
            
            for (let i = 0; i < 8; i++) {
                const coral = document.createElement('div');
                coral.className = 'coral';
                coral.textContent = coralShapes[Math.floor(Math.random() * coralShapes.length)];
                coral.style.left = `${i * 12 + Math.random() * 8}%`;
                coral.style.fontSize = `${30 + Math.random() * 40}px`;
                coral.style.filter = `hue-rotate(${Math.random() * 360}deg) drop-shadow(0 2px 4px rgba(0,0,0,0.3))`;
                container.appendChild(coral);
            }
        }

        // Create fish
        function createFish() {
            const container = document.getElementById('fishContainer');
            container.innerHTML = '';
            fishes = [];
            
            for (let i = 0; i < config.fishCount; i++) {
                const fish = document.createElement('div');
                fish.className = 'fish';
                fish.textContent = fishEmojis[Math.floor(Math.random() * fishEmojis.length)];
                
                const fishData = {
                    element: fish,
                    x: Math.random() * window.innerWidth,
                    y: Math.random() * (window.innerHeight * 0.7) + 50,
                    speedX: (Math.random() * 2 + 1) * config.animSpeed,
                    speedY: (Math.random() - 0.5) * 0.5,
                    size: 30 + Math.random() * 30,
                    direction: Math.random() > 0.5 ? 1 : -1
                };
                
                fish.style.fontSize = `${fishData.size}px`;
                fish.style.left = `${fishData.x}px`;
                fish.style.top = `${fishData.y}px`;
                fish.style.transform = fishData.direction === -1 ? 'scaleX(-1)' : 'scaleX(1)';
                fish.style.filter = `hue-rotate(${Math.random() * 360}deg) drop-shadow(2px 2px 4px rgba(0,0,0,0.3))`;
                
                container.appendChild(fish);
                fishes.push(fishData);
            }
        }

        // Animate fish
        function animateFish() {
            fishes.forEach(fish => {
                fish.x += fish.speedX * fish.direction * config.animSpeed;
                fish.y += fish.speedY * config.animSpeed;
                
                // Wrap around screen
                if (fish.direction === 1 && fish.x > window.innerWidth + 100) {
                    fish.x = -100;
                    fish.y = Math.random() * (window.innerHeight * 0.7) + 50;
                } else if (fish.direction === -1 && fish.x < -100) {
                    fish.x = window.innerWidth + 100;
                    fish.y = Math.random() * (window.innerHeight * 0.7) + 50;
                }
                
                // Bounce off top and bottom
                if (fish.y < 50 || fish.y > window.innerHeight * 0.8) {
                    fish.speedY *= -1;
                }
                
                fish.element.style.left = `${fish.x}px`;
                fish.element.style.top = `${fish.y}px`;
            });
            
            requestAnimationFrame(animateFish);
        }

        // Create bubbles
        function startBubbles() {
            const container = document.getElementById('bubbleContainer');
            const bubbleCount = config.bubbleIntensity * 3;
            
            setInterval(() => {
                if (bubbles.length < bubbleCount) {
                    createBubble();
                }
            }, 1000 / bubbleCount);
            
            animateBubbles();
        }

        function createBubble() {
            const container = document.getElementById('bubbleContainer');
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            
            const bubbleData = {
                element: bubble,
                x: Math.random() * window.innerWidth,
                y: window.innerHeight + 50,
                speedY: (Math.random() * 2 + 1) * config.animSpeed,
                wobble: Math.random() * 2 - 1,
                size: Math.random() * 8 + 4
            };
            
            bubble.style.width = `${bubbleData.size}px`;
            bubble.style.height = `${bubbleData.size}px`;
            bubble.style.left = `${bubbleData.x}px`;
            
            container.appendChild(bubble);
            bubbles.push(bubbleData);
        }

        function animateBubbles() {
            bubbles = bubbles.filter(bubble => {
                bubble.y -= bubble.speedY * config.animSpeed;
                bubble.x += Math.sin(bubble.y * 0.01) * bubble.wobble;
                
                bubble.element.style.bottom = `${window.innerHeight - bubble.y}px`;
                bubble.element.style.left = `${bubble.x}px`;
                
                if (bubble.y < -50) {
                    bubble.element.remove();
                    return false;
                }
                return true;
            });
            
            requestAnimationFrame(animateBubbles);
        }

        // Mouse interaction
        function setupMouseInteraction() {
            let mouseX = 0, mouseY = 0;
            
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
                
                // Fish avoid cursor
                fishes.forEach(fish => {
                    const dx = fish.x - mouseX;
                    const dy = fish.y - mouseY;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < 150) {
                        const angle = Math.atan2(dy, dx);
                        fish.x += Math.cos(angle) * 2;
                        fish.y += Math.sin(angle) * 2;
                    }
                });
                
                // Light rays follow cursor slightly
                const rays = document.querySelectorAll('.light-ray');
                rays.forEach((ray, index) => {
                    const offset = (mouseX / window.innerWidth - 0.5) * 30;
                    ray.style.transform = `translateX(${offset}px) rotate(${offset * 0.1}deg)`;
                });
            });
        }

        // Event listeners
        function setupEventListeners() {
            // Settings toggle
            document.getElementById('settingsToggle').addEventListener('click', () => {
                document.getElementById('settingsPanel').classList.toggle('open');
            });

            // Fish count
            document.getElementById('fishCount').addEventListener('input', (e) => {
                config.fishCount = parseInt(e.target.value);
                document.getElementById('fishCountValue').textContent = config.fishCount;
                createFish();
            });

            // Bubble intensity
            document.getElementById('bubbleIntensity').addEventListener('input', (e) => {
                config.bubbleIntensity = parseInt(e.target.value);
                const labels = ['Low', 'Medium', 'High'];
                document.getElementById('bubbleIntensityValue').textContent = labels[config.bubbleIntensity - 1];
            });

            // Animation speed
            document.getElementById('animSpeed').addEventListener('input', (e) => {
                config.animSpeed = parseFloat(e.target.value);
                const labels = { 0.5: 'Slow', 1: 'Normal', 1.5: 'Fast', 2: 'Very Fast' };
                document.getElementById('animSpeedValue').textContent = labels[config.animSpeed];
                updateAnimationSpeed();
            });

            // Light intensity
            document.getElementById('lightIntensity').addEventListener('input', (e) => {
                config.lightIntensity = parseInt(e.target.value);
                const labels = ['Dim', 'Normal', 'Bright'];
                document.getElementById('lightIntensityValue').textContent = labels[config.lightIntensity - 1];
                updateLightIntensity();
            });

            // Seaweed density
            document.getElementById('seaweedDensity').addEventListener('input', (e) => {
                config.seaweedDensity = parseInt(e.target.value);
                document.getElementById('seaweedDensityValue').textContent = config.seaweedDensity;
                createSeaweed();
            });

            // Background theme
            document.getElementById('bgTheme').addEventListener('change', (e) => {
                updateBackgroundTheme(e.target.value);
            });

            // Sound toggle
            document.getElementById('soundToggle').addEventListener('click', () => {
                config.soundEnabled = !config.soundEnabled;
                const btn = document.getElementById('soundToggle');
                btn.textContent = config.soundEnabled ? 'üîä Sound On' : 'üîá Sound Off';
                if (config.soundEnabled) {
                    playAmbientSound();
                } else {
                    stopAmbientSound();
                }
            });

            // Scenery buttons
            document.querySelectorAll('.scenery-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.scenery-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    const scenery = btn.dataset.scenery;
                    applyScenery(scenery);
                });
            });

            // Fullscreen
            document.getElementById('fullscreenBtn').addEventListener('click', () => {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen();
                } else {
                    document.exitFullscreen();
                }
            });
        }

        function updateAnimationSpeed() {
            const seaweeds = document.querySelectorAll('.seaweed');
            seaweeds.forEach(seaweed => {
                const baseDuration = parseFloat(seaweed.style.animationDuration) || 4;
                seaweed.style.animationDuration = `${baseDuration / config.animSpeed}s`;
            });
        }

        function updateLightIntensity() {
            const lightRays = document.querySelector('.light-rays');
            const intensities = [0.15, 0.3, 0.5];
            lightRays.style.opacity = intensities[config.lightIntensity - 1];
        }

        function updateBackgroundTheme(theme) {
            const scene = document.getElementById('ocean-scene');
            const themes = {
                'deep-blue': 'linear-gradient(to bottom, #001f3f 0%, #003d5c 30%, #4ECDC4 100%)',
                'turquoise': 'linear-gradient(to bottom, #00a8cc 0%, #4ECDC4 50%, #a8e6cf 100%)',
                'twilight': 'linear-gradient(to bottom, #2c3e50 0%, #34495e 50%, #5d6d7e 100%)',
                'clear-water': 'linear-gradient(to bottom, #87ceeb 0%, #4fc3f7 50%, #29b6f6 100%)'
            };
            scene.style.background = themes[theme];
        }

        function applyScenery(scenery) {
            config.currentScenery = scenery;
            const scene = document.getElementById('ocean-scene');
            const theme = sceneryThemes[scenery];
            
            scene.style.background = theme.background;
            
            const lightRays = document.querySelector('.light-rays');
            lightRays.style.opacity = theme.lightIntensity;
            
            // Update fish colors based on scenery
            if (scenery === 'deep') {
                fishes.forEach(fish => {
                    fish.element.style.filter = 'brightness(0.7) hue-rotate(200deg) drop-shadow(0 0 10px rgba(0, 255, 255, 0.5))';
                });
            } else if (scenery === 'kelp') {
                fishes.forEach(fish => {
                    fish.element.style.filter = 'hue-rotate(120deg) saturate(0.8) drop-shadow(2px 2px 4px rgba(0,0,0,0.3))';
                });
            } else if (scenery === 'sunset') {
                fishes.forEach(fish => {
                    fish.element.style.filter = 'hue-rotate(30deg) saturate(1.3) brightness(1.1) drop-shadow(2px 2px 4px rgba(0,0,0,0.3))';
                });
            } else {
                fishes.forEach(fish => {
                    fish.element.style.filter = `hue-rotate(${Math.random() * 360}deg) drop-shadow(2px 2px 4px rgba(0,0,0,0.3))`;
                });
            }
        }

        // Audio functions
        function playAmbientSound() {
            if (isAudioPlaying) return;
            
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                isAudioPlaying = true;
                
                // Create gentle ocean ambient sound
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(100, audioContext.currentTime);
                
                gainNode.gain.setValueAtTime(0.01, audioContext.currentTime);
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.start();
                
                // Store for cleanup
                window.ambientOscillator = oscillator;
                window.ambientGain = gainNode;
            } catch (e) {
                console.log('Audio not supported');
            }
        }

        function stopAmbientSound() {
            if (window.ambientOscillator) {
                window.ambientOscillator.stop();
                window.ambientOscillator = null;
            }
            if (audioContext) {
                audioContext.close();
                audioContext = null;
            }
            isAudioPlaying = false;
        }

        // Initialize on load
        window.addEventListener('load', init);
    </script>
</body>
</html>