<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foggy Forest Road</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        #canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }

        .controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 15px;
            color: white;
            max-width: 280px;
            z-index: 1000;
            transition: opacity 0.3s;
        }

        .controls.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 13px;
            color: #ddd;
        }

        .control-group input[type="range"] {
            width: 100%;
            cursor: pointer;
        }

        .control-group select {
            width: 100%;
            padding: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
        }

        .control-group select option {
            background: #2a2a2a;
        }

        .toggle-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            z-index: 999;
            transition: background 0.3s;
        }

        .toggle-btn:hover {
            background: rgba(0, 0, 0, 0.8);
        }

        .value-display {
            display: inline-block;
            float: right;
            color: #aaa;
            font-size: 12px;
        }

        h3 {
            margin-bottom: 15px;
            font-size: 16px;
            color: #fff;
            text-align: center;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    
    <button class="toggle-btn" onclick="toggleControls()">‚öôÔ∏è Controls</button>
    
    <div class="controls hidden" id="controls">
        <h3>üå≤ Forest Controls</h3>
        
        <div class="control-group">
            <label>Scenery <span class="value-display" id="sceneryDisplay"></span></label>
            <select id="scenerySelect" onchange="changeScenery()">
                <option value="foggyForest">Foggy Forest Road</option>
                <option value="twilight">Twilight Forest</option>
                <option value="autumn">Autumn Path</option>
                <option value="moonlit">Moonlit Grove</option>
                <option value="dawn">Dawn Mist</option>
            </select>
        </div>
        
        <div class="control-group">
            <label>Fog Density <span class="value-display" id="fogDisplay">50%</span></label>
            <input type="range" id="fogDensity" min="0" max="100" value="50" oninput="updateFogDensity(this.value)">
        </div>
        
        <div class="control-group">
            <label>Fog Speed <span class="value-display" id="speedDisplay">50%</span></label>
            <input type="range" id="fogSpeed" min="10" max="100" value="50" oninput="updateFogSpeed(this.value)">
        </div>
        
        <div class="control-group">
            <label>Tree Layers <span class="value-display" id="layersDisplay">7</span></label>
            <input type="range" id="treeLayers" min="3" max="12" value="7" oninput="updateTreeLayers(this.value)">
        </div>
        
        <div class="control-group">
            <label>Animation Speed <span class="value-display" id="animDisplay">50%</span></label>
            <input type="range" id="animSpeed" min="10" max="100" value="50" oninput="updateAnimSpeed(this.value)">
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;
        
        let config = {
            fogDensity: 0.5,
            fogSpeed: 0.5,
            treeLayers: 7,
            animSpeed: 0.5,
            scenery: 'foggyForest'
        };
        
        const sceneries = {
            foggyForest: {
                skyTop: '#8a9ba8',
                skyBottom: '#c5d3dd',
                roadColor: '#4a5a5a',
                treeColor: '#2c3e3e',
                fogColor: 'rgba(200, 210, 220, ',
                name: 'Foggy Forest Road'
            },
            twilight: {
                skyTop: '#2d1b4e',
                skyBottom: '#7b5a91',
                roadColor: '#3a3a50',
                treeColor: '#1a1a2e',
                fogColor: 'rgba(100, 80, 120, ',
                name: 'Twilight Forest'
            },
            autumn: {
                skyTop: '#d4a574',
                skyBottom: '#e8c4a0',
                roadColor: '#6b5444',
                treeColor: '#8b4513',
                fogColor: 'rgba(220, 180, 140, ',
                name: 'Autumn Path'
            },
            moonlit: {
                skyTop: '#0f1e3a',
                skyBottom: '#1a3a5c',
                roadColor: '#2a2a3e',
                treeColor: '#0a0a1a',
                fogColor: 'rgba(80, 100, 140, ',
                name: 'Moonlit Grove'
            },
            dawn: {
                skyTop: '#ff9a56',
                skyBottom: '#ffd19e',
                roadColor: '#7a6a5a',
                treeColor: '#4a3a2a',
                fogColor: 'rgba(255, 200, 150, ',
                name: 'Dawn Mist'
            }
        };
        
        let fogParticles = [];
        let time = 0;
        
        class FogParticle {
            constructor() {
                this.reset();
            }
            
            reset() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.size = Math.random() * 300 + 100;
                this.speedX = (Math.random() - 0.5) * 0.3;
                this.speedY = Math.random() * 0.1 + 0.05;
                this.opacity = Math.random() * 0.3 + 0.1;
            }
            
            update() {
                this.x += this.speedX * config.fogSpeed * config.animSpeed;
                this.y += this.speedY * config.fogSpeed * config.animSpeed;
                
                if (this.y > height + this.size) {
                    this.y = -this.size;
                    this.x = Math.random() * width;
                }
                if (this.x > width + this.size) this.x = -this.size;
                if (this.x < -this.size) this.x = width + this.size;
            }
            
            draw() {
                const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.size);
                const currentScenery = sceneries[config.scenery];
                gradient.addColorStop(0, currentScenery.fogColor + (this.opacity * config.fogDensity) + ')');
                gradient.addColorStop(1, currentScenery.fogColor + '0)');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(this.x - this.size, this.y - this.size, this.size * 2, this.size * 2);
            }
        }
        
        function initFog() {
            fogParticles = [];
            for (let i = 0; i < 50; i++) {
                fogParticles.push(new FogParticle());
            }
        }
        
        function drawSky() {
            const currentScenery = sceneries[config.scenery];
            const gradient = ctx.createLinearGradient(0, 0, 0, height);
            gradient.addColorStop(0, currentScenery.skyTop);
            gradient.addColorStop(1, currentScenery.skyBottom);
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);
        }
        
        function drawRoad() {
            const currentScenery = sceneries[config.scenery];
            const vanishY = height * 0.4;
            const vanishX = width / 2;
            
            ctx.fillStyle = currentScenery.roadColor;
            ctx.beginPath();
            ctx.moveTo(0, height);
            ctx.lineTo(width * 0.3, height);
            ctx.lineTo(vanishX - 30, vanishY);
            ctx.lineTo(vanishX + 30, vanishY);
            ctx.lineTo(width * 0.7, height);
            ctx.lineTo(width, height);
            ctx.closePath();
            ctx.fill();
            
            // Road center line
            ctx.strokeStyle = 'rgba(200, 200, 150, 0.3)';
            ctx.lineWidth = 3;
            ctx.setLineDash([20, 30]);
            ctx.beginPath();
            ctx.moveTo(vanishX, vanishY);
            ctx.lineTo(vanishX, height);
            ctx.stroke();
            ctx.setLineDash([]);
        }
        
        function drawTree(x, y, scale, layer) {
            const currentScenery = sceneries[config.scenery];
            const opacity = 0.2 + (layer / config.treeLayers) * 0.6;
            const sway = Math.sin(time * 0.001 + x * 0.01) * 2 * scale;
            
            ctx.save();
            ctx.translate(x + sway, y);
            ctx.scale(scale, scale);
            
            // Trunk
            ctx.fillStyle = currentScenery.treeColor;
            ctx.globalAlpha = opacity;
            ctx.fillRect(-8, 0, 16, 120);
            
            // Foliage
            for (let i = 0; i < 5; i++) {
                const foliageY = 20 + i * 20;
                const foliageWidth = 60 - i * 8;
                ctx.beginPath();
                ctx.moveTo(0, foliageY);
                ctx.lineTo(-foliageWidth / 2, foliageY + 30);
                ctx.lineTo(foliageWidth / 2, foliageY + 30);
                ctx.closePath();
                ctx.fill();
            }
            
            ctx.restore();
        }
        
        function drawTreeLayer(layer) {
            const depth = layer / config.treeLayers;
            const scale = 0.3 + depth * 1.5;
            const yBase = height * (0.4 + depth * 0.6);
            const spacing = width / (8 - layer);
            
            for (let i = -2; i < 12; i++) {
                const x = i * spacing + (Math.sin(time * 0.0005 + i) * 20);
                const y = yBase + Math.sin(i * 0.5) * 30;
                drawTree(x, y, scale, layer);
            }
        }
        
        function animate() {
            time += 16 * config.animSpeed;
            
            drawSky();
            drawRoad();
            
            for (let i = 0; i < config.treeLayers; i++) {
                drawTreeLayer(i);
                
                // Draw fog between tree layers
                ctx.globalAlpha = 1;
                const layerFog = fogParticles.slice(
                    Math.floor(i * fogParticles.length / config.treeLayers),
                    Math.floor((i + 1) * fogParticles.length / config.treeLayers)
                );
                layerFog.forEach(particle => {
                    particle.update();
                    particle.draw();
                });
            }
            
            requestAnimationFrame(animate);
        }
        
        function updateFogDensity(value) {
            config.fogDensity = value / 100;
            document.getElementById('fogDisplay').textContent = value + '%';
        }
        
        function updateFogSpeed(value) {
            config.fogSpeed = value / 100;
            document.getElementById('speedDisplay').textContent = value + '%';
        }
        
        function updateTreeLayers(value) {
            config.treeLayers = parseInt(value);
            document.getElementById('layersDisplay').textContent = value;
        }
        
        function updateAnimSpeed(value) {
            config.animSpeed = value / 100;
            document.getElementById('animDisplay').textContent = value + '%';
        }
        
        function changeScenery() {
            const select = document.getElementById('scenerySelect');
            config.scenery = select.value;
            document.getElementById('sceneryDisplay').textContent = sceneries[config.scenery].name;
        }
        
        function toggleControls() {
            const controls = document.getElementById('controls');
            controls.classList.toggle('hidden');
        }
        
        window.addEventListener('resize', () => {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            initFog();
        });
        
        initFog();
        changeScenery();
        animate();
    </script>
</body>
</html>