<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schoolyard After Hours - Enhanced</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            width: 100%;
            height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            background: #1a1a2e;
        }

        .scene {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        /* Sky Layers */
        .sky {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 65%;
            transition: background 1.5s ease;
            z-index: 1;
        }

        .sun {
            position: absolute;
            width: 140px;
            height: 140px;
            border-radius: 50%;
            top: 18%;
            right: 12%;
            transition: all 1.5s ease;
            z-index: 2;
            filter: blur(2px);
        }

        .sun::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: inherit;
            filter: blur(20px);
            opacity: 0.6;
        }

        /* Clouds */
        .clouds {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 3;
        }

        .cloud {
            position: absolute;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 100px;
            opacity: 0;
            animation: cloudDrift 40s linear infinite;
            filter: blur(3px);
        }

        .cloud::before,
        .cloud::after {
            content: '';
            position: absolute;
            background: rgba(255, 255, 255, 0.12);
            border-radius: 100px;
        }

        .cloud-1 { width: 100px; height: 40px; top: 15%; left: -10%; animation-delay: 0s; }
        .cloud-1::before { width: 50px; height: 35px; top: -15px; left: 15px; }
        .cloud-1::after { width: 60px; height: 30px; top: -10px; right: 15px; }

        .cloud-2 { width: 120px; height: 45px; top: 25%; left: -15%; animation-delay: 15s; }
        .cloud-2::before { width: 55px; height: 40px; top: -18px; left: 20px; }
        .cloud-2::after { width: 65px; height: 35px; top: -12px; right: 20px; }

        .cloud-3 { width: 90px; height: 35px; top: 35%; left: -12%; animation-delay: 30s; }
        .cloud-3::before { width: 45px; height: 30px; top: -12px; left: 12px; }
        .cloud-3::after { width: 50px; height: 28px; top: -8px; right: 12px; }

        @keyframes cloudDrift {
            0% { left: -15%; opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { left: 115%; opacity: 0; }
        }

        /* Stars */
        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 2;
            opacity: 0;
            transition: opacity 2s ease;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* Birds */
        .birds {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 4;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .bird {
            position: absolute;
            width: 20px;
            height: 2px;
            animation: birdFly 25s linear infinite;
        }

        .bird::before,
        .bird::after {
            content: '';
            position: absolute;
            width: 10px;
            height: 2px;
            background: rgba(0, 0, 0, 0.4);
        }

        .bird::before {
            left: 0;
            transform: rotate(-20deg);
            animation: wingFlap 0.5s ease-in-out infinite;
        }

        .bird::after {
            right: 0;
            transform: rotate(20deg);
            animation: wingFlap 0.5s ease-in-out infinite 0.25s;
        }

        @keyframes birdFly {
            0% { left: -5%; top: 20%; }
            100% { left: 105%; top: 15%; }
        }

        @keyframes wingFlap {
            0%, 100% { transform: rotate(-20deg); }
            50% { transform: rotate(-35deg); }
        }

        /* Ground */
        .ground {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 42%;
            transition: background 1.5s ease;
            z-index: 10;
        }

        .grass-overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(255,255,255,0.03) 1px, transparent 1px),
                radial-gradient(circle at 60% 70%, rgba(255,255,255,0.02) 1px, transparent 1px),
                radial-gradient(circle at 85% 45%, rgba(0,0,0,0.03) 1px, transparent 1px);
            background-size: 40px 40px, 60px 60px, 80px 80px;
        }

        /* Trees */
        .trees {
            position: absolute;
            bottom: 35%;
            left: 0;
            width: 100%;
            height: 20%;
            z-index: 11;
        }

        .tree {
            position: absolute;
            bottom: 0;
        }

        .trunk {
            width: 12px;
            height: 60px;
            background: linear-gradient(90deg, #4a3728 0%, #5d4734 50%, #4a3728 100%);
            margin: 0 auto;
            border-radius: 2px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.3);
        }

        .foliage {
            width: 70px;
            height: 70px;
            background: radial-gradient(circle, rgba(80, 120, 60, 0.9) 0%, rgba(60, 90, 45, 0.8) 100%);
            border-radius: 50%;
            position: absolute;
            top: -50px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: inset -5px -5px 10px rgba(0,0,0,0.2);
            animation: treeRustle 4s ease-in-out infinite;
        }

        @keyframes treeRustle {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.02) rotate(1deg); }
        }

        /* Court */
        .court {
            position: absolute;
            bottom: 22%;
            left: 50%;
            transform: translateX(-50%);
            width: 55%;
            height: 22%;
            border: 3px solid rgba(245, 245, 245, 0.8);
            background: linear-gradient(135deg, 
                rgba(90, 110, 80, 0.7) 0%,
                rgba(75, 95, 65, 0.8) 100%);
            box-shadow: 
                inset 0 10px 30px rgba(0, 0, 0, 0.25),
                0 5px 20px rgba(0, 0, 0, 0.3);
            z-index: 12;
            transition: all 0.8s ease;
        }

        .court-line {
            position: absolute;
            background: rgba(245, 245, 245, 0.7);
        }

        .center-line {
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 100%;
        }

        .center-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            border: 2px solid rgba(245, 245, 245, 0.6);
            border-radius: 50%;
        }

        .three-point-arc {
            position: absolute;
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 75px;
            border: 2px solid rgba(245, 245, 245, 0.5);
            border-top-left-radius: 150px;
            border-top-right-radius: 150px;
            border-bottom: none;
        }

        /* Basketball */
        .basketball {
            position: absolute;
            bottom: 24%;
            left: 48%;
            width: 28px;
            height: 28px;
            background: radial-gradient(circle at 35% 35%, #e87d2e, #c85a1f);
            border-radius: 50%;
            z-index: 13;
            box-shadow: 
                0 3px 8px rgba(0, 0, 0, 0.4),
                inset -2px -2px 4px rgba(0, 0, 0, 0.2);
            animation: ballIdle 3s ease-in-out infinite;
        }

        .basketball::before,
        .basketball::after {
            content: '';
            position: absolute;
            background: rgba(0, 0, 0, 0.3);
        }

        .basketball::before {
            width: 2px;
            height: 100%;
            left: 50%;
            transform: translateX(-50%);
        }

        .basketball::after {
            width: 100%;
            height: 2px;
            top: 50%;
            transform: translateY(-50%);
        }

        @keyframes ballIdle {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-3px) rotate(2deg); }
        }

        /* Hoop */
        .hoop-structure {
            position: absolute;
            bottom: 44%;
            right: 24%;
            z-index: 14;
        }

        .pole {
            width: 14px;
            height: 150px;
            background: linear-gradient(90deg, 
                #2a2a2a 0%, 
                #3d3d3d 40%, 
                #505050 50%, 
                #3d3d3d 60%, 
                #2a2a2a 100%);
            box-shadow: 
                3px 0 8px rgba(0, 0, 0, 0.5),
                inset -1px 0 2px rgba(255, 255, 255, 0.1);
            position: relative;
            animation: poleSway 5s ease-in-out infinite;
        }

        @keyframes poleSway {
            0%, 100% { transform: skewX(0deg); }
            50% { transform: skewX(0.3deg); }
        }

        .backboard {
            position: absolute;
            top: -5px;
            right: -90px;
            width: 90px;
            height: 65px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.85) 0%, 
                rgba(230, 230, 230, 0.9) 100%);
            border: 3px solid #c41e3a;
            border-radius: 4px;
            box-shadow: 
                0 5px 20px rgba(0, 0, 0, 0.4),
                inset 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .backboard-square {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 30px;
            border: 2px solid rgba(196, 30, 58, 0.6);
        }

        .rim {
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 45px;
            height: 12px;
            border: 3px solid #c41e3a;
            border-radius: 50%;
            box-shadow: 
                0 0 15px rgba(196, 30, 58, 0.5),
                inset 0 -2px 3px rgba(0, 0, 0, 0.3);
            animation: rimGlow 3s ease-in-out infinite;
        }

        @keyframes rimGlow {
            0%, 100% { box-shadow: 0 0 15px rgba(196, 30, 58, 0.5); }
            50% { box-shadow: 0 0 25px rgba(196, 30, 58, 0.8); }
        }

        .net {
            position: absolute;
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: 38px;
            height: 70px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.15) 50%, 
                transparent 100%);
            border-left: 2px solid rgba(255, 255, 255, 0.4);
            border-right: 2px solid rgba(255, 255, 255, 0.4);
            clip-path: polygon(0 0, 100% 0, 90% 100%, 10% 100%);
            opacity: 0.6;
            animation: netSway 2s ease-in-out infinite;
        }

        @keyframes netSway {
            0%, 100% { transform: translateX(-50%) skewX(0deg); }
            50% { transform: translateX(-50%) skewX(1deg); }
        }

        /* Fence */
        .fence {
            position: absolute;
            bottom: 20%;
            left: 0;
            width: 100%;
            height: 24%;
            z-index: 15;
            background-image: 
                repeating-linear-gradient(0deg, 
                    transparent, 
                    transparent 9px, 
                    rgba(107, 114, 128, 0.35) 9px, 
                    rgba(107, 114, 128, 0.35) 10px),
                repeating-linear-gradient(90deg, 
                    transparent, 
                    transparent 9px, 
                    rgba(107, 114, 128, 0.35) 9px, 
                    rgba(107, 114, 128, 0.35) 10px);
            border-top: 5px solid rgba(107, 114, 128, 0.6);
            border-bottom: 5px solid rgba(107, 114, 128, 0.5);
            box-shadow: 
                inset 0 0 40px rgba(0, 0, 0, 0.3),
                0 5px 20px rgba(0, 0, 0, 0.2);
            transition: opacity 0.5s ease;
            animation: fenceShimmer 6s ease-in-out infinite;
        }

        @keyframes fenceShimmer {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 0.85; }
        }

        /* Playground */
        .playground {
            position: absolute;
            bottom: 38%;
            left: 8%;
            z-index: 11;
            opacity: 0.7;
            filter: blur(1px);
            transition: all 0.5s ease;
        }

        .swing-set {
            position: relative;
            width: 100px;
            height: 110px;
        }

        .swing-frame-top {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 18px;
            background: linear-gradient(180deg, #8b7355 0%, #6d5940 100%);
            border-radius: 4px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.5);
        }

        .swing-chain {
            position: absolute;
            top: 18px;
            width: 2px;
            height: 55px;
            background: linear-gradient(180deg, 
                rgba(180, 180, 180, 0.5) 0%, 
                rgba(150, 150, 150, 0.4) 100%);
            transform-origin: top center;
        }

        .swing-left {
            left: 20px;
            animation: swingMotion 3.5s ease-in-out infinite;
        }

        .swing-right {
            left: 58px;
            animation: swingMotion 3.5s ease-in-out infinite 1.75s;
        }

        .swing-seat {
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 18px;
            height: 8px;
            background: linear-gradient(180deg, #c41e3a 0%, #a01830 100%);
            border-radius: 2px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        @keyframes swingMotion {
            0%, 100% { transform: rotate(-12deg); }
            50% { transform: rotate(12deg); }
        }

        .slide {
            position: absolute;
            left: 110px;
            bottom: 0;
            width: 60px;
            height: 80px;
        }

        .slide-ladder {
            position: absolute;
            left: 0;
            bottom: 0;
            width: 15px;
            height: 80px;
            background: linear-gradient(90deg, #8b7355 0%, #6d5940 100%);
            border-radius: 2px;
        }

        .slide-surface {
            position: absolute;
            right: 0;
            top: 0;
            width: 40px;
            height: 70px;
            background: linear-gradient(135deg, 
                rgba(50, 150, 200, 0.7) 0%, 
                rgba(30, 120, 180, 0.6) 100%);
            border-radius: 5px;
            clip-path: polygon(0 0, 100% 20%, 100% 100%, 20% 100%);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }

        /* Particles */
        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 20;
            pointer-events: none;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            animation: particleFloat 12s linear infinite;
        }

        @keyframes particleFloat {
            0% { 
                opacity: 0; 
                transform: translateY(100vh) scale(0.5); 
            }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { 
                opacity: 0; 
                transform: translateY(-100px) scale(1.2); 
            }
        }

        /* Rain effect */
        .rain {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 25;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .raindrop {
            position: absolute;
            width: 2px;
            height: 20px;
            background: linear-gradient(180deg, 
                transparent 0%, 
                rgba(174, 194, 224, 0.5) 100%);
            animation: rainfall 1s linear infinite;
        }

        @keyframes rainfall {
            0% { transform: translateY(-100px); opacity: 0; }
            10% { opacity: 0.8; }
            100% { transform: translateY(100vh); opacity: 0; }
        }

        /* Controls */
        .controls {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: rgba(26, 26, 46, 0.95);
            border: 1px solid rgba(50, 184, 198, 0.3);
            border-radius: 15px;
            padding: 25px;
            z-index: 100;
            min-width: 240px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
        }

        .controls::-webkit-scrollbar {
            width: 6px;
        }

        .controls::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }

        .controls::-webkit-scrollbar-thumb {
            background: rgba(50, 184, 198, 0.5);
            border-radius: 3px;
        }

        .control-section {
            margin-bottom: 25px;
        }

        .control-section:last-child {
            margin-bottom: 0;
        }

        .control-title {
            color: #32b8c6;
            margin-bottom: 15px;
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }

        .control-group {
            margin-bottom: 18px;
        }

        .control-label {
            display: block;
            color: rgba(255, 255, 255, 0.75);
            font-size: 11px;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .slider {
            width: 100%;
            height: 5px;
            border-radius: 3px;
            background: rgba(107, 114, 128, 0.4);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            cursor: pointer;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #32b8c6;
            cursor: pointer;
            box-shadow: 
                0 0 10px rgba(50, 184, 198, 0.6),
                0 2px 5px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            background: #50c8d6;
            box-shadow: 
                0 0 15px rgba(50, 184, 198, 0.8),
                0 3px 8px rgba(0, 0, 0, 0.4);
        }

        .slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border: none;
            border-radius: 50%;
            background: #32b8c6;
            cursor: pointer;
            box-shadow: 
                0 0 10px rgba(50, 184, 198, 0.6),
                0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .btn-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 10px;
        }

        .btn {
            padding: 10px;
            background: rgba(107, 114, 128, 0.4);
            color: rgba(255, 255, 255, 0.7);
            border: 1px solid rgba(50, 184, 198, 0.2);
            border-radius: 8px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn:hover {
            background: rgba(107, 114, 128, 0.6);
            border-color: rgba(50, 184, 198, 0.4);
            color: rgba(255, 255, 255, 0.9);
            transform: translateY(-1px);
        }

        .btn.active {
            background: #32b8c6;
            color: #1a1a2e;
            border-color: #32b8c6;
        }

        .btn-full {
            grid-column: span 2;
        }

        /* Info Panel */
        .info {
            position: fixed;
            top: 25px;
            left: 25px;
            color: rgba(255, 255, 255, 0.8);
            z-index: 100;
            max-width: 350px;
        }

        .info h1 {
            font-size: 28px;
            color: #32b8c6;
            margin-bottom: 8px;
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(50, 184, 198, 0.3);
        }

        .info p {
            font-size: 14px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .controls {
                bottom: 15px;
                right: 15px;
                left: 15px;
                min-width: auto;
                padding: 20px;
                max-height: 70vh;
            }

            .info {
                top: 15px;
                left: 15px;
                max-width: 250px;
            }

            .info h1 {
                font-size: 22px;
            }

            .info p {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="scene">
        <!-- Sky -->
        <div class="sky" id="sky"></div>
        <div class="sun" id="sun"></div>
        
        <!-- Clouds -->
        <div class="clouds" id="clouds">
            <div class="cloud cloud-1"></div>
            <div class="cloud cloud-2"></div>
            <div class="cloud cloud-3"></div>
        </div>

        <!-- Stars -->
        <div class="stars" id="stars"></div>

        <!-- Birds -->
        <div class="birds" id="birds"></div>

        <!-- Rain -->
        <div class="rain" id="rain"></div>

        <!-- Ground -->
        <div class="ground" id="ground">
            <div class="grass-overlay"></div>
        </div>

        <!-- Trees -->
        <div class="trees" id="trees">
            <div class="tree" style="left: 10%;">
                <div class="trunk"></div>
                <div class="foliage"></div>
            </div>
            <div class="tree" style="left: 88%; opacity: 0.8;">
                <div class="trunk"></div>
                <div class="foliage"></div>
            </div>
        </div>

        <!-- Court -->
        <div class="court" id="court">
            <div class="court-line center-line"></div>
            <div class="center-circle"></div>
            <div class="three-point-arc"></div>
        </div>

        <!-- Basketball -->
        <div class="basketball" id="basketball"></div>

        <!-- Hoop -->
        <div class="hoop-structure" id="hoop">
            <div class="pole">
                <div class="backboard">
                    <div class="backboard-square"></div>
                    <div class="rim">
                        <div class="net"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Playground -->
        <div class="playground" id="playground">
            <div class="swing-set">
                <div class="swing-frame-top"></div>
                <div class="swing-chain swing-left">
                    <div class="swing-seat"></div>
                </div>
                <div class="swing-chain swing-right">
                    <div class="swing-seat"></div>
                </div>
            </div>
            <div class="slide">
                <div class="slide-ladder"></div>
                <div class="slide-surface"></div>
            </div>
        </div>

        <!-- Fence -->
        <div class="fence" id="fence"></div>

        <!-- Particles -->
        <div class="particles" id="particles"></div>
    </div>

    <!-- Info -->
    <div class="info">
        <h1>Schoolyard After Hours</h1>
        <p>A tranquil escape. Customize your experience with the controls.</p>
    </div>

    <!-- Controls -->
    <div class="controls">
        <div class="control-section">
            <div class="control-title">Scenery</div>
            <div class="btn-group">
                <button class="btn active" data-scenery="golden-hour">Golden Hour</button>
                <button class="btn" data-scenery="sunset">Sunset</button>
                <button class="btn" data-scenery="dusk">Dusk</button>
                <button class="btn" data-scenery="night">Night</button>
            </div>
        </div>

        <div class="control-section">
            <div class="control-title">Atmosphere</div>
            <div class="control-group">
                <label class="control-label">Sky Intensity</label>
                <input type="range" class="slider" id="skyIntensity" min="0" max="100" value="100">
            </div>
            <div class="control-group">
                <label class="control-label">Particle Amount</label>
                <input type="range" class="slider" id="particleDensity" min="0" max="100" value="40">
            </div>
            <div class="control-group">
                <label class="control-label">Animation Speed</label>
                <input type="range" class="slider" id="animSpeed" min="25" max="200" value="100">
            </div>
        </div>

        <div class="control-section">
            <div class="control-title">Elements</div>
            <div class="btn-group">
                <button class="btn active" id="toggleClouds">Clouds</button>
                <button class="btn active" id="toggleBirds">Birds</button>
                <button class="btn active" id="toggleFence">Fence</button>
                <button class="btn active" id="toggleHoop">Hoop</button>
                <button class="btn active" id="togglePlayground">Playground</button>
                <button class="btn active" id="toggleBall">Basketball</button>
                <button class="btn" id="toggleRain">Rain</button>
            </div>
        </div>
    </div>

    <script>
        // Scene configurations
        const sceneries = {
            'golden-hour': {
                sky: 'linear-gradient(180deg, #87CEEB 0%, #FDB863 40%, #FF8C42 70%, #FF6B35 100%)',
                sun: {
                    background: 'radial-gradient(circle at 30% 30%, rgba(255, 255, 150, 0.9), #FDB833)',
                    opacity: 1,
                    top: '18%'
                },
                ground: 'linear-gradient(180deg, #5a7a4f 0%, #4a6a3f 50%, #3a5a2f 100%)',
                showStars: false,
                showBirds: true,
                cloudOpacity: 1
            },
            'sunset': {
                sky: 'linear-gradient(180deg, #4a6fa5 0%, #ff6b5b 40%, #ff6b35 70%, #f7931e 100%)',
                sun: {
                    background: 'radial-gradient(circle at 30% 30%, rgba(255, 200, 100, 0.8), #FF8C42)',
                    opacity: 0.9,
                    top: '25%'
                },
                ground: 'linear-gradient(180deg, #4a5f3f 0%, #3d5030 50%, #2a3a1f 100%)',
                showStars: false,
                showBirds: true,
                cloudOpacity: 0.8
            },
            'dusk': {
                sky: 'linear-gradient(180deg, #1a2634 0%, #2c3e50 30%, #ff4500 70%, #ff6347 100%)',
                sun: {
                    background: 'radial-gradient(circle at 30% 30%, rgba(255, 100, 50, 0.7), #FF6347)',
                    opacity: 0.6,
                    top: '35%'
                },
                ground: 'linear-gradient(180deg, #3a4f35 0%, #2d3d25 50%, #1f2b15 100%)',
                showStars: true,
                showBirds: false,
                cloudOpacity: 0.5
            },
            'night': {
                sky: 'linear-gradient(180deg, #0a0e27 0%, #1a1f3a 40%, #2a2045 100%)',
                sun: {
                    background: 'radial-gradient(circle at 30% 30%, rgba(200, 200, 220, 0.9), #d0d0e0)',
                    opacity: 0.4,
                    top: '15%'
                },
                ground: 'linear-gradient(180deg, #2a3520 0%, #1a2310 50%, #0f1608 100%)',
                showStars: true,
                showBirds: false,
                cloudOpacity: 0.3
            }
        };

        // State
        let state = {
            currentScenery: 'golden-hour',
            elements: {
                clouds: true,
                birds: true,
                fence: true,
                hoop: true,
                playground: true,
                ball: true,
                rain: false
            },
            intensity: 100,
            particleDensity: 40,
            animSpeed: 100
        };

        // DOM elements
        const sky = document.getElementById('sky');
        const sun = document.getElementById('sun');
        const ground = document.getElementById('ground');
        const stars = document.getElementById('stars');
        const clouds = document.getElementById('clouds');
        const birds = document.getElementById('birds');
        const rain = document.getElementById('rain');
        const fence = document.getElementById('fence');
        const hoop = document.getElementById('hoop');
        const playground = document.getElementById('playground');
        const basketball = document.getElementById('basketball');
        const particles = document.getElementById('particles');

        // Initialize stars
        function createStars() {
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 2 + 1;
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 60 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                star.style.animationDuration = (Math.random() * 2 + 2) + 's';
                stars.appendChild(star);
            }
        }

        // Initialize birds
        function createBirds() {
            for (let i = 0; i < 5; i++) {
                const bird = document.createElement('div');
                bird.className = 'bird';
                bird.style.animationDelay = (i * 5) + 's';
                bird.style.animationDuration = (20 + Math.random() * 10) + 's';
                birds.appendChild(bird);
            }
        }

        // Initialize rain
        function createRain() {
            for (let i = 0; i < 100; i++) {
                const drop = document.createElement('div');
                drop.className = 'raindrop';
                drop.style.left = Math.random() * 100 + '%';
                drop.style.animationDelay = Math.random() * 2 + 's';
                drop.style.animationDuration = (Math.random() * 0.5 + 0.5) + 's';
                rain.appendChild(drop);
            }
        }

        // Particle system
        function createParticles(count) {
            particles.innerHTML = '';
            for (let i = 0; i < count; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                const size = Math.random() * 4 + 1;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.background = `radial-gradient(circle, rgba(255, 255, 255, ${Math.random() * 0.3 + 0.5}), transparent)`;
                particle.style.animationDuration = (Math.random() * 8 + 8) + 's';
                particle.style.animationDelay = Math.random() * 5 + 's';
                particles.appendChild(particle);
            }
        }

        // Apply scenery
        function applyScenery(sceneryName) {
            const scenery = sceneries[sceneryName];
            
            sky.style.background = scenery.sky;
            sun.style.background = scenery.sun.background;
            sun.style.opacity = scenery.sun.opacity * (state.intensity / 100);
            sun.style.top = scenery.sun.top;
            ground.style.background = scenery.ground;
            
            stars.style.opacity = scenery.showStars ? 1 : 0;
            birds.style.opacity = scenery.showBirds && state.elements.birds ? 1 : 0;
            clouds.style.opacity = scenery.cloudOpacity * (state.elements.clouds ? 1 : 0);
            
            state.currentScenery = sceneryName;
        }

        // Update animation speed
        function updateAnimationSpeed(speed) {
            const factor = speed / 100;
            document.documentElement.style.setProperty('--anim-speed', factor);
            
            document.querySelectorAll('[style*="animation"]').forEach(el => {
                const current = el.style.animation;
                if (current) {
                    el.style.animation = 'none';
                    setTimeout(() => { el.style.animation = current; }, 10);
                }
            });
        }

        // Event listeners
        document.querySelectorAll('[data-scenery]').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('[data-scenery]').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                applyScenery(btn.dataset.scenery);
            });
        });

        document.getElementById('skyIntensity').addEventListener('input', (e) => {
            state.intensity = e.target.value;
            sun.style.opacity = sceneries[state.currentScenery].sun.opacity * (state.intensity / 100);
        });

        document.getElementById('particleDensity').addEventListener('input', (e) => {
            state.particleDensity = e.target.value;
            const count = Math.floor(state.particleDensity / 2);
            createParticles(count);
        });

        document.getElementById('animSpeed').addEventListener('input', (e) => {
            state.animSpeed = e.target.value;
            updateAnimationSpeed(state.animSpeed);
        });

        // Toggle elements
        function setupToggle(btnId, element, key) {
            const btn = document.getElementById(btnId);
            btn.addEventListener('click', () => {
                state.elements[key] = !state.elements[key];
                element.style.opacity = state.elements[key] ? 1 : 0;
                btn.classList.toggle('active');
            });
        }

        setupToggle('toggleClouds', clouds, 'clouds');
        setupToggle('toggleFence', fence, 'fence');
        setupToggle('toggleHoop', hoop, 'hoop');
        setupToggle('togglePlayground', playground, 'playground');
        setupToggle('toggleBall', basketball, 'ball');

        document.getElementById('toggleBirds').addEventListener('click', () => {
            state.elements.birds = !state.elements.birds;
            const scenery = sceneries[state.currentScenery];
            birds.style.opacity = scenery.showBirds && state.elements.birds ? 1 : 0;
            document.getElementById('toggleBirds').classList.toggle('active');
        });

        document.getElementById('toggleRain').addEventListener('click', () => {
            state.elements.rain = !state.elements.rain;
            rain.style.opacity = state.elements.rain ? 0.8 : 0;
            document.getElementById('toggleRain').classList.toggle('active');
        });

        // Initialize
        createStars();
        createBirds();
        createRain();
        createParticles(20);
        applyScenery('golden-hour');
    </script>
</body>
</html>