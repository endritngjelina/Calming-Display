<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inferno - Mesmerizing Hell Experience</title>
    <style>
        :root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08); /* Light blue */
  --color-bg-2: rgba(245, 158, 11, 0.08); /* Light yellow */
  --color-bg-3: rgba(34, 197, 94, 0.08); /* Light green */
  --color-bg-4: rgba(239, 68, 68, 0.08); /* Light red */
  --color-bg-5: rgba(147, 51, 234, 0.08); /* Light purple */
  --color-bg-6: rgba(249, 115, 22, 0.08); /* Light orange */
  --color-bg-7: rgba(236, 72, 153, 0.08); /* Light pink */
  --color-bg-8: rgba(6, 182, 212, 0.08); /* Light cyan */

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Common style patterns */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for opacity control */
  --color-success-rgb: 33, 128, 141;
  --color-error-rgb: 192, 21, 47;
  --color-warning-rgb: 168, 75, 47;
  --color-info-rgb: 98, 108, 113;

  /* Typography */
  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo,
    Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04),
    0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04),
    0 4px 6px -2px rgba(0, 0, 0, 0.02);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

  /* Layout */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;
}

/* Dark mode colors */
@media (prefers-color-scheme: dark) {
  :root {
    /* RGB versions for opacity control (Dark Mode) */
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;

    /* Background color tokens (Dark Mode) */
    --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
    --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
    --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
    --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
    --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
    --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
    --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
    --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

    /* Semantic Color Tokens (Dark Mode) */
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.15);
    --button-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

    /* Common style patterns - updated for dark mode */
    --focus-ring: 0 0 0 3px var(--color-focus-ring);
    --focus-outline: 2px solid var(--color-primary);
    --status-bg-opacity: 0.15;
    --status-border-opacity: 0.25;
    --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

    /* RGB versions for dark mode */
    --color-success-rgb: var(--color-teal-300-rgb);
    --color-error-rgb: var(--color-red-400-rgb);
    --color-warning-rgb: var(--color-orange-400-rgb);
    --color-info-rgb: var(--color-gray-300-rgb);
  }
}

/* Data attribute for manual theme switching */
[data-color-scheme="dark"] {
  /* RGB versions for opacity control (dark mode) */
  --color-gray-400-rgb: 119, 124, 124;
  --color-teal-300-rgb: 50, 184, 198;
  --color-gray-300-rgb: 167, 169, 169;
  --color-gray-200-rgb: 245, 245, 245;

  /* Colorful background palette - Dark Mode */
  --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
  --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
  --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
  --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
  --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
  --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
  --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
  --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

  /* Semantic Color Tokens (Dark Mode) */
  --color-background: var(--color-charcoal-700);
  --color-surface: var(--color-charcoal-800);
  --color-text: var(--color-gray-200);
  --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
  --color-primary: var(--color-teal-300);
  --color-primary-hover: var(--color-teal-400);
  --color-primary-active: var(--color-teal-800);
  --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
  --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
  --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
  --color-border: rgba(var(--color-gray-400-rgb), 0.3);
  --color-error: var(--color-red-400);
  --color-success: var(--color-teal-300);
  --color-warning: var(--color-orange-400);
  --color-info: var(--color-gray-300);
  --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
  --color-btn-primary-text: var(--color-slate-900);
  --color-card-border: rgba(var(--color-gray-400-rgb), 0.15);
  --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
  --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

  /* Common style patterns - updated for dark mode */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for dark mode */
  --color-success-rgb: var(--color-teal-300-rgb);
  --color-error-rgb: var(--color-red-400-rgb);
  --color-warning-rgb: var(--color-orange-400-rgb);
  --color-info-rgb: var(--color-gray-300-rgb);
}

[data-color-scheme="light"] {
  /* RGB versions for opacity control (light mode) */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);

  /* RGB versions for light mode */
  --color-success-rgb: var(--color-teal-500-rgb);
  --color-error-rgb: var(--color-red-500-rgb);
  --color-warning-rgb: var(--color-orange-500-rgb);
  --color-info-rgb: var(--color-slate-500-rgb);
}

/* Base styles */
html {
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  line-height: var(--line-height-normal);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text);
  letter-spacing: var(--letter-spacing-tight);
}

h1 {
  font-size: var(--font-size-4xl);
}
h2 {
  font-size: var(--font-size-3xl);
}
h3 {
  font-size: var(--font-size-2xl);
}
h4 {
  font-size: var(--font-size-xl);
}
h5 {
  font-size: var(--font-size-lg);
}
h6 {
  font-size: var(--font-size-md);
}

p {
  margin: 0 0 var(--space-16) 0;
}

a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-standard);
}

a:hover {
  color: var(--color-primary-hover);
}

code,
pre {
  font-family: var(--font-family-mono);
  font-size: calc(var(--font-size-base) * 0.95);
  background-color: var(--color-secondary);
  border-radius: var(--radius-sm);
}

code {
  padding: var(--space-1) var(--space-4);
}

pre {
  padding: var(--space-16);
  margin: var(--space-16) 0;
  overflow: auto;
  border: 1px solid var(--color-border);
}

pre code {
  background: none;
  padding: 0;
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-16);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-weight: 500;
  line-height: 1.5;
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  border: none;
  text-decoration: none;
  position: relative;
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.btn--primary {
  background: var(--color-primary);
  color: var(--color-btn-primary-text);
}

.btn--primary:hover {
  background: var(--color-primary-hover);
}

.btn--primary:active {
  background: var(--color-primary-active);
}

.btn--secondary {
  background: var(--color-secondary);
  color: var(--color-text);
}

.btn--secondary:hover {
  background: var(--color-secondary-hover);
}

.btn--secondary:active {
  background: var(--color-secondary-active);
}

.btn--outline {
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text);
}

.btn--outline:hover {
  background: var(--color-secondary);
}

.btn--sm {
  padding: var(--space-4) var(--space-12);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-sm);
}

.btn--lg {
  padding: var(--space-10) var(--space-20);
  font-size: var(--font-size-lg);
  border-radius: var(--radius-md);
}

.btn--full-width {
  width: 100%;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Form elements */
.form-control {
  display: block;
  width: 100%;
  padding: var(--space-8) var(--space-12);
  font-size: var(--font-size-md);
  line-height: 1.5;
  color: var(--color-text);
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  transition: border-color var(--duration-fast) var(--ease-standard),
    box-shadow var(--duration-fast) var(--ease-standard);
}

textarea.form-control {
  font-family: var(--font-family-base);
  font-size: var(--font-size-base);
}

select.form-control {
  padding: var(--space-8) var(--space-12);
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: var(--select-caret-light);
  background-repeat: no-repeat;
  background-position: right var(--space-12) center;
  background-size: 16px;
  padding-right: var(--space-32);
}

/* Add a dark mode specific caret */
@media (prefers-color-scheme: dark) {
  select.form-control {
    background-image: var(--select-caret-dark);
  }
}

/* Also handle data-color-scheme */
[data-color-scheme="dark"] select.form-control {
  background-image: var(--select-caret-dark);
}

[data-color-scheme="light"] select.form-control {
  background-image: var(--select-caret-light);
}

.form-control:focus {
  border-color: var(--color-primary);
  outline: var(--focus-outline);
}

.form-label {
  display: block;
  margin-bottom: var(--space-8);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.form-group {
  margin-bottom: var(--space-16);
}

/* Card component */
.card {
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  transition: box-shadow var(--duration-normal) var(--ease-standard);
}

.card:hover {
  box-shadow: var(--shadow-md);
}

.card__body {
  padding: var(--space-16);
}

.card__header,
.card__footer {
  padding: var(--space-16);
  border-bottom: 1px solid var(--color-card-border-inner);
}

/* Status indicators - simplified with CSS variables */
.status {
  display: inline-flex;
  align-items: center;
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-full);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.status--success {
  background-color: rgba(
    var(--color-success-rgb, 33, 128, 141),
    var(--status-bg-opacity)
  );
  color: var(--color-success);
  border: 1px solid
    rgba(var(--color-success-rgb, 33, 128, 141), var(--status-border-opacity));
}

.status--error {
  background-color: rgba(
    var(--color-error-rgb, 192, 21, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-error);
  border: 1px solid
    rgba(var(--color-error-rgb, 192, 21, 47), var(--status-border-opacity));
}

.status--warning {
  background-color: rgba(
    var(--color-warning-rgb, 168, 75, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-warning);
  border: 1px solid
    rgba(var(--color-warning-rgb, 168, 75, 47), var(--status-border-opacity));
}

.status--info {
  background-color: rgba(
    var(--color-info-rgb, 98, 108, 113),
    var(--status-bg-opacity)
  );
  color: var(--color-info);
  border: 1px solid
    rgba(var(--color-info-rgb, 98, 108, 113), var(--status-border-opacity));
}

/* Container layout */
.container {
  width: 100%;
  margin-right: auto;
  margin-left: auto;
  padding-right: var(--space-16);
  padding-left: var(--space-16);
}

@media (min-width: 640px) {
  .container {
    max-width: var(--container-sm);
  }
}
@media (min-width: 768px) {
  .container {
    max-width: var(--container-md);
  }
}
@media (min-width: 1024px) {
  .container {
    max-width: var(--container-lg);
  }
}
@media (min-width: 1280px) {
  .container {
    max-width: var(--container-xl);
  }
}

/* Utility classes */
.flex {
  display: flex;
}
.flex-col {
  flex-direction: column;
}
.items-center {
  align-items: center;
}
.justify-center {
  justify-content: center;
}
.justify-between {
  justify-content: space-between;
}
.gap-4 {
  gap: var(--space-4);
}
.gap-8 {
  gap: var(--space-8);
}
.gap-16 {
  gap: var(--space-16);
}

.m-0 {
  margin: 0;
}
.mt-8 {
  margin-top: var(--space-8);
}
.mb-8 {
  margin-bottom: var(--space-8);
}
.mx-8 {
  margin-left: var(--space-8);
  margin-right: var(--space-8);
}
.my-8 {
  margin-top: var(--space-8);
  margin-bottom: var(--space-8);
}

.p-0 {
  padding: 0;
}
.py-8 {
  padding-top: var(--space-8);
  padding-bottom: var(--space-8);
}
.px-8 {
  padding-left: var(--space-8);
  padding-right: var(--space-8);
}
.py-16 {
  padding-top: var(--space-16);
  padding-bottom: var(--space-16);
}
.px-16 {
  padding-left: var(--space-16);
  padding-right: var(--space-16);
}

.block {
  display: block;
}
.hidden {
  display: none;
}

/* Accessibility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

:focus-visible {
  outline: var(--focus-outline);
  outline-offset: 2px;
}

/* Dark mode specifics */
[data-color-scheme="dark"] .btn--outline {
  border: 1px solid var(--color-border-secondary);
}

@font-face {
  font-family: 'FKGroteskNeue';
  src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2')
    format('woff2');
}

/* END PERPLEXITY DESIGN SYSTEM */
:root {
  --color-bg-deep-black: #000000;
  --color-bg-dark-red-1: #1a0000;
  --color-bg-dark-red-2: #330000;
  --color-fire-orange: #FF4500;
  --color-fire-crimson: #DC143C;
  --color-fire-gold: #FFD700;
  --color-fire-tomato: #FF6347;
  --color-intense-yellow: #FFFACD;
  --color-intense-bright: #FFFF00;
  --color-lava-orange: #FFA500;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #000;
}

body {
  position: relative;
}

/* Background gradient layer */
.inferno-bg {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center bottom, var(--color-bg-dark-red-2) 0%, var(--color-bg-dark-red-1) 40%, var(--color-bg-deep-black) 100%);
  z-index: 1;
  animation: bgPulse 8s ease-in-out infinite;
}

@keyframes bgPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.85; }
}

/* Lava crack effects */
.lava-layer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2;
  pointer-events: none;
}

.lava-crack {
  position: absolute;
  background: linear-gradient(90deg, transparent 0%, var(--color-fire-tomato) 50%, transparent 100%);
  box-shadow: 0 0 40px var(--color-fire-orange), 0 0 80px var(--color-fire-crimson);
  filter: blur(3px);
}

.lava-crack-1 {
  bottom: 0;
  left: 10%;
  width: 25%;
  height: 8px;
  animation: lavaGlow1 3s ease-in-out infinite, lavaSpread1 15s ease-in-out infinite;
}

.lava-crack-2 {
  bottom: 0;
  right: 15%;
  width: 30%;
  height: 6px;
  animation: lavaGlow2 4s ease-in-out infinite 0.5s, lavaSpread2 18s ease-in-out infinite;
}

.lava-crack-3 {
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 20%;
  height: 10px;
  animation: lavaGlow1 3.5s ease-in-out infinite 1s, lavaSpread3 12s ease-in-out infinite;
}

@keyframes lavaGlow1 {
  0%, 100% { 
    opacity: 0.8;
    box-shadow: 0 0 40px var(--color-fire-orange), 0 0 80px var(--color-fire-crimson);
  }
  50% { 
    opacity: 1;
    box-shadow: 0 0 60px var(--color-fire-gold), 0 0 120px var(--color-fire-orange), 0 0 160px var(--color-fire-crimson);
  }
}

@keyframes lavaGlow2 {
  0%, 100% { 
    opacity: 0.7;
    box-shadow: 0 0 35px var(--color-fire-tomato), 0 0 70px var(--color-fire-orange);
  }
  50% { 
    opacity: 1;
    box-shadow: 0 0 50px var(--color-intense-yellow), 0 0 100px var(--color-fire-gold), 0 0 140px var(--color-fire-orange);
  }
}

@keyframes lavaSpread1 {
  0%, 100% { width: 25%; }
  50% { width: 28%; }
}

@keyframes lavaSpread2 {
  0%, 100% { width: 30%; }
  50% { width: 35%; }
}

@keyframes lavaSpread3 {
  0%, 100% { width: 20%; }
  50% { width: 24%; }
}

/* Fire layers */
.fire-layer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  pointer-events: none;
}

.fire-layer-1 {
  height: 40%;
  background: linear-gradient(to top, 
    var(--color-fire-orange) 0%,
    var(--color-fire-tomato) 20%,
    var(--color-fire-crimson) 40%,
    transparent 100%
  );
  opacity: 0.4;
  z-index: 3;
  animation: fireFlicker1 2s ease-in-out infinite, fireRise1 4s ease-in-out infinite;
  filter: blur(40px);
}

.fire-layer-2 {
  height: 50%;
  background: linear-gradient(to top,
    var(--color-fire-tomato) 0%,
    var(--color-fire-orange) 15%,
    var(--color-fire-gold) 35%,
    transparent 100%
  );
  opacity: 0.5;
  z-index: 4;
  animation: fireFlicker2 1.8s ease-in-out infinite 0.3s, fireRise2 3.5s ease-in-out infinite;
  filter: blur(30px);
}

.fire-layer-3 {
  height: 60%;
  background: linear-gradient(to top,
    var(--color-fire-gold) 0%,
    var(--color-fire-orange) 20%,
    var(--color-fire-crimson) 45%,
    transparent 100%
  );
  opacity: 0.6;
  z-index: 5;
  animation: fireFlicker3 1.5s ease-in-out infinite 0.6s, fireRise3 3s ease-in-out infinite;
  filter: blur(20px);
}

@keyframes fireFlicker1 {
  0%, 100% { opacity: 0.3; }
  25% { opacity: 0.45; }
  50% { opacity: 0.35; }
  75% { opacity: 0.4; }
}

@keyframes fireFlicker2 {
  0%, 100% { opacity: 0.4; }
  25% { opacity: 0.55; }
  50% { opacity: 0.45; }
  75% { opacity: 0.5; }
}

@keyframes fireFlicker3 {
  0%, 100% { opacity: 0.5; }
  25% { opacity: 0.65; }
  50% { opacity: 0.55; }
  75% { opacity: 0.6; }
}

@keyframes fireRise1 {
  0%, 100% { transform: translateY(0) scaleY(1); }
  50% { transform: translateY(-20px) scaleY(1.05); }
}

@keyframes fireRise2 {
  0%, 100% { transform: translateY(0) scaleY(1); }
  50% { transform: translateY(-15px) scaleY(1.08); }
}

@keyframes fireRise3 {
  0%, 100% { transform: translateY(0) scaleY(1); }
  50% { transform: translateY(-10px) scaleY(1.1); }
}

/* Heat distortion */
.heat-distortion {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 6;
  pointer-events: none;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(255, 69, 0, 0.03) 2px,
    rgba(255, 69, 0, 0.03) 4px
  );
  animation: heatWave 1.5s ease-in-out infinite;
}

@keyframes heatWave {
  0%, 100% { 
    transform: translateY(0) skewY(0deg);
    opacity: 0.6;
  }
  25% { 
    transform: translateY(-2px) skewY(0.3deg);
    opacity: 0.7;
  }
  50% { 
    transform: translateY(0) skewY(0deg);
    opacity: 0.8;
  }
  75% { 
    transform: translateY(2px) skewY(-0.3deg);
    opacity: 0.7;
  }
}

/* Canvas layers - proper ordering for depth */
#backgroundCanvas,
#lavaCanvas,
#environmentCanvas,
#particleCanvas,
#fireCanvas,
#explosionCanvas,
#effectsCanvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

#backgroundCanvas {
  z-index: 2;
}

#lavaCanvas {
  z-index: 3;
}

#environmentCanvas {
  z-index: 4;
}

#particleCanvas {
  z-index: 7;
}

#fireCanvas {
  z-index: 6;
}

#explosionCanvas {
  z-index: 8;
}

#effectsCanvas {
  z-index: 11;
}

/* Smoke layer */
.smoke-layer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 9;
  pointer-events: none;
}

.smoke {
  position: absolute;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, rgba(20, 20, 20, 0.4) 0%, transparent 70%);
  border-radius: 50%;
  filter: blur(40px);
}

.smoke-1 {
  bottom: -100px;
  left: 10%;
  animation: smokeDrift1 20s ease-in-out infinite;
}

.smoke-2 {
  bottom: -100px;
  right: 15%;
  animation: smokeDrift2 25s ease-in-out infinite 2s;
}

.smoke-3 {
  bottom: -100px;
  left: 40%;
  animation: smokeDrift3 22s ease-in-out infinite 4s;
}

.smoke-4 {
  bottom: -100px;
  right: 30%;
  animation: smokeDrift4 28s ease-in-out infinite 6s;
}

@keyframes smokeDrift1 {
  0% { 
    transform: translate(0, 0) scale(1);
    opacity: 0;
  }
  10% { opacity: 0.6; }
  90% { opacity: 0.4; }
  100% { 
    transform: translate(-50px, -100vh) scale(1.5);
    opacity: 0;
  }
}

@keyframes smokeDrift2 {
  0% { 
    transform: translate(0, 0) scale(1);
    opacity: 0;
  }
  10% { opacity: 0.5; }
  90% { opacity: 0.3; }
  100% { 
    transform: translate(60px, -100vh) scale(1.8);
    opacity: 0;
  }
}

@keyframes smokeDrift3 {
  0% { 
    transform: translate(0, 0) scale(1);
    opacity: 0;
  }
  10% { opacity: 0.7; }
  90% { opacity: 0.5; }
  100% { 
    transform: translate(30px, -100vh) scale(1.6);
    opacity: 0;
  }
}

@keyframes smokeDrift4 {
  0% { 
    transform: translate(0, 0) scale(1);
    opacity: 0;
  }
  10% { opacity: 0.6; }
  90% { opacity: 0.4; }
  100% { 
    transform: translate(-70px, -100vh) scale(2);
    opacity: 0;
  }
}

/* Pulsating glow overlay */
.glow-pulse {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10;
  pointer-events: none;
  background: radial-gradient(ellipse at center bottom, 
    rgba(255, 69, 0, 0.2) 0%,
    rgba(255, 99, 71, 0.1) 30%,
    transparent 60%
  );
  animation: glowPulse 5s ease-in-out infinite;
}

@keyframes glowPulse {
  0%, 100% { 
    opacity: 0.4;
    transform: scale(1);
  }
  50% { 
    opacity: 0.7;
    transform: scale(1.05);
  }
}

/* Subtle shake animation for body */
@keyframes subtleShake {
  0%, 100% { transform: translate(0, 0); }
  10% { transform: translate(-1px, 0.5px); }
  20% { transform: translate(1px, -0.5px); }
  30% { transform: translate(-0.5px, 1px); }
  40% { transform: translate(0.5px, -1px); }
  50% { transform: translate(-1px, 0.5px); }
  60% { transform: translate(1px, 0.5px); }
  70% { transform: translate(-0.5px, -0.5px); }
  80% { transform: translate(0.5px, 1px); }
  90% { transform: translate(-1px, -0.5px); }
}

body.screen-shake {
  animation: screenShake 0.3s ease-in-out;
}

@keyframes screenShake {
  0%, 100% { transform: translate(0, 0); }
  10% { transform: translate(-4px, 2px); }
  20% { transform: translate(4px, -2px); }
  30% { transform: translate(-3px, 3px); }
  40% { transform: translate(3px, -3px); }
  50% { transform: translate(-4px, 2px); }
  60% { transform: translate(4px, 2px); }
  70% { transform: translate(-3px, -2px); }
  80% { transform: translate(3px, 3px); }
  90% { transform: translate(-4px, -2px); }
}

/* Lightning flash overlay */
.lightning-flash {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.3), rgba(255, 69, 0, 0.2) 40%, transparent 70%);
  z-index: 12;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.05s;
}

/* Intensity overlay for dynamic changes */
.intensity-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
  pointer-events: none;
  background: radial-gradient(ellipse at center bottom, rgba(139, 0, 0, 0.2), transparent);
  opacity: 0;
  transition: opacity 1s;
}
    </style>
</head>
<body>
    <!-- Background gradient layer -->
    <div class="inferno-bg"></div>
    
    <!-- Lava cracks layer -->
    <div class="lava-layer">
        <div class="lava-crack lava-crack-1"></div>
        <div class="lava-crack lava-crack-2"></div>
        <div class="lava-crack lava-crack-3"></div>
    </div>
    
    <!-- Fire layers (background to foreground) -->
    <div class="fire-layer fire-layer-1"></div>
    <div class="fire-layer fire-layer-2"></div>
    <div class="fire-layer fire-layer-3"></div>
    
    <!-- Heat distortion layer -->
    <div class="heat-distortion"></div>
    
    <!-- Multiple canvas layers for advanced compositing -->
    <canvas id="backgroundCanvas"></canvas>
    <canvas id="lavaCanvas"></canvas>
    <canvas id="environmentCanvas"></canvas>
    <canvas id="particleCanvas"></canvas>
    <canvas id="fireCanvas"></canvas>
    <canvas id="explosionCanvas"></canvas>
    <canvas id="effectsCanvas"></canvas>
    
    <!-- Smoke/fog layer -->
    <div class="smoke-layer">
        <div class="smoke smoke-1"></div>
        <div class="smoke smoke-2"></div>
        <div class="smoke smoke-3"></div>
        <div class="smoke smoke-4"></div>
    </div>
    
    <!-- Pulsating glow overlay -->
    <div class="glow-pulse"></div>
    
    <script>
        // Inferno Visual Experience - MASSIVELY UPGRADED

// Canvas setup - multiple layers
const backgroundCanvas = document.getElementById('backgroundCanvas');
const backgroundCtx = backgroundCanvas.getContext('2d');
const lavaCanvas = document.getElementById('lavaCanvas');
const lavaCtx = lavaCanvas.getContext('2d');
const environmentCanvas = document.getElementById('environmentCanvas');
const environmentCtx = environmentCanvas.getContext('2d');
const particleCanvas = document.getElementById('particleCanvas');
const particleCtx = particleCanvas.getContext('2d');
const fireCanvas = document.getElementById('fireCanvas');
const fireCtx = fireCanvas.getContext('2d');
const explosionCanvas = document.getElementById('explosionCanvas');
const explosionCtx = explosionCanvas.getContext('2d');
const effectsCanvas = document.getElementById('effectsCanvas');
const effectsCtx = effectsCanvas.getContext('2d');

const canvases = [backgroundCanvas, lavaCanvas, environmentCanvas, particleCanvas, fireCanvas, explosionCanvas, effectsCanvas];
const contexts = [backgroundCtx, lavaCtx, environmentCtx, particleCtx, fireCtx, explosionCtx, effectsCtx];

// Resize all canvases to fill window
function resizeCanvases() {
    canvases.forEach(canvas => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });
}

resizeCanvases();
window.addEventListener('resize', resizeCanvases);

// Global state
const state = {
    time: 0,
    intensity: 0.5,
    targetIntensity: 0.5,
    windX: 0,
    windY: -1,
    mouseX: window.innerWidth / 2,
    mouseY: window.innerHeight / 2,
    screenShakeAmount: 0,
    stormMode: false,
    cameraX: 0,
    cameraY: 0
};

// Extended color palette with hellish accents
const colors = {
    embers: ['#FF4500', '#DC143C', '#FFD700', '#FF6347', '#FFA500'],
    explosions: ['#FFFACD', '#FFFF00', '#FFD700', '#FF4500', '#DC143C'],
    sparks: ['#FFFACD', '#FFFF00', '#FFD700', '#FFF8DC'],
    plasma: ['#FFFFFF', '#E0E0E0', '#FFE4E1', '#FFFACD'],
    hot: ['#FFFACD', '#FFFF00', '#FFF8DC'],
    lava: ['#FF4500', '#DC143C', '#8B0000', '#FF6347'],
    hellish: ['#800080', '#228B22', '#8B0000', '#4B0082'],
    ash: ['#1a1a1a', '#2d2d2d', '#404040'],
    debris: ['#8B4513', '#654321', '#2F1F1F']
};

// ADVANCED PARTICLE SYSTEM - 5 Types
class Ember {
    constructor() {
        this.type = 'ember';
        this.reset();
    }
    
    reset() {
        this.x = Math.random() * particleCanvas.width;
        this.y = particleCanvas.height + Math.random() * 100;
        this.size = Math.random() * 6 + 2;
        this.vx = (Math.random() - 0.5) * 2;
        this.vy = -(Math.random() * 3 + 1);
        this.color = colors.embers[Math.floor(Math.random() * colors.embers.length)];
        this.opacity = Math.random() * 0.8 + 0.2;
        this.life = Math.random() * 300 + 200;
        this.maxLife = this.life;
        this.rotation = Math.random() * Math.PI * 2;
        this.rotationSpeed = (Math.random() - 0.5) * 0.1;
        this.flicker = Math.random() * Math.PI * 2;
        this.mass = this.size;
    }
    
    update() {
        // Physics
        this.vx += state.windX * 0.05 + (Math.random() - 0.5) * 0.2;
        this.vy += state.windY * 0.02 - 0.05; // Slight upward force (hot air)
        this.vx *= 0.98;
        this.vy *= 0.98;
        
        this.x += this.vx;
        this.y += this.vy;
        this.rotation += this.rotationSpeed;
        this.flicker += 0.1;
        this.life--;
        
        // Fade out
        this.opacity = (this.life / this.maxLife) * (0.8 + Math.sin(this.flicker) * 0.2);
        
        if (this.life <= 0 || this.y < -100 || this.x < -100 || this.x > particleCanvas.width + 100) {
            this.reset();
        }
    }
    
    draw(ctx) {
        ctx.save();
        ctx.globalAlpha = this.opacity;
        ctx.translate(this.x, this.y);
        ctx.rotate(this.rotation);
        ctx.fillStyle = this.color;
        ctx.shadowBlur = 20;
        ctx.shadowColor = this.color;
        ctx.fillRect(-this.size/2, -this.size/2, this.size, this.size);
        ctx.restore();
    }
}

class Spark {
    constructor() {
        this.type = 'spark';
        this.reset();
    }
    
    reset() {
        this.x = Math.random() * particleCanvas.width;
        this.y = particleCanvas.height + Math.random() * 50;
        this.size = Math.random() * 2 + 1;
        this.vx = (Math.random() - 0.5) * 4;
        this.vy = -(Math.random() * 6 + 2);
        this.color = colors.sparks[Math.floor(Math.random() * colors.sparks.length)];
        this.opacity = 1;
        this.life = Math.random() * 100 + 50;
        this.maxLife = this.life;
        this.trail = [];
    }
    
    update() {
        this.vy += 0.15; // Gravity
        this.vx *= 0.99;
        this.x += this.vx;
        this.y += this.vy;
        this.life--;
        
        this.trail.push({x: this.x, y: this.y});
        if (this.trail.length > 8) this.trail.shift();
        
        this.opacity = this.life / this.maxLife;
        
        if (this.life <= 0 || this.y > particleCanvas.height + 100) {
            this.reset();
        }
    }
    
    draw(ctx) {
        // Draw trail
        this.trail.forEach((point, i) => {
            ctx.save();
            ctx.globalAlpha = (i / this.trail.length) * this.opacity * 0.5;
            ctx.fillStyle = this.color;
            ctx.shadowBlur = 10;
            ctx.shadowColor = this.color;
            ctx.beginPath();
            ctx.arc(point.x, point.y, this.size * 0.7, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();
        });
        
        // Draw spark
        ctx.save();
        ctx.globalAlpha = this.opacity;
        ctx.fillStyle = this.color;
        ctx.shadowBlur = 15;
        ctx.shadowColor = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();
    }
}

class Ash {
    constructor() {
        this.type = 'ash';
        this.reset();
    }
    
    reset() {
        this.x = Math.random() * particleCanvas.width;
        this.y = particleCanvas.height + Math.random() * 200;
        this.size = Math.random() * 8 + 3;
        this.vx = (Math.random() - 0.5) * 0.5;
        this.vy = -(Math.random() * 0.5 + 0.2);
        this.color = colors.ash[Math.floor(Math.random() * colors.ash.length)];
        this.opacity = Math.random() * 0.4 + 0.2;
        this.life = Math.random() * 800 + 500;
        this.maxLife = this.life;
        this.rotation = Math.random() * Math.PI * 2;
        this.rotationSpeed = (Math.random() - 0.5) * 0.02;
        this.floatOffset = Math.random() * Math.PI * 2;
    }
    
    update() {
        this.floatOffset += 0.02;
        this.vx += Math.sin(this.floatOffset) * 0.02 + state.windX * 0.1;
        this.vy += Math.cos(this.floatOffset) * 0.01;
        
        this.x += this.vx;
        this.y += this.vy;
        this.rotation += this.rotationSpeed;
        this.life--;
        
        this.opacity = (this.life / this.maxLife) * 0.6;
        
        if (this.life <= 0 || this.y < -100 || this.x < -100 || this.x > particleCanvas.width + 100) {
            this.reset();
        }
    }
    
    draw(ctx) {
        ctx.save();
        ctx.globalAlpha = this.opacity;
        ctx.translate(this.x, this.y);
        ctx.rotate(this.rotation);
        ctx.fillStyle = this.color;
        ctx.fillRect(-this.size/2, -this.size/2, this.size, this.size * 0.7);
        ctx.restore();
    }
}

class Debris {
    constructor() {
        this.type = 'debris';
        this.active = false;
    }
    
    reset(x, y) {
        this.active = true;
        this.x = x || Math.random() * particleCanvas.width;
        this.y = y || particleCanvas.height * 0.5;
        this.size = Math.random() * 15 + 5;
        const angle = Math.random() * Math.PI * 2;
        const speed = Math.random() * 10 + 5;
        this.vx = Math.cos(angle) * speed;
        this.vy = Math.sin(angle) * speed - 5;
        this.color = colors.debris[Math.floor(Math.random() * colors.debris.length)];
        this.glowColor = colors.embers[Math.floor(Math.random() * colors.embers.length)];
        this.opacity = 1;
        this.life = Math.random() * 200 + 100;
        this.maxLife = this.life;
        this.rotation = Math.random() * Math.PI * 2;
        this.rotationSpeed = (Math.random() - 0.5) * 0.3;
        this.burning = true;
    }
    
    update() {
        if (!this.active) return;
        
        this.vy += 0.3; // Gravity
        this.vx *= 0.98;
        this.vy *= 0.98;
        
        this.x += this.vx;
        this.y += this.vy;
        this.rotation += this.rotationSpeed;
        this.life--;
        
        this.opacity = this.life / this.maxLife;
        
        if (this.life <= 0 || this.y > particleCanvas.height + 100) {
            this.active = false;
        }
    }
    
    draw(ctx) {
        if (!this.active) return;
        
        ctx.save();
        ctx.globalAlpha = this.opacity;
        ctx.translate(this.x, this.y);
        ctx.rotate(this.rotation);
        
        // Burning glow
        if (this.burning) {
            ctx.shadowBlur = 25;
            ctx.shadowColor = this.glowColor;
        }
        
        ctx.fillStyle = this.color;
        ctx.fillRect(-this.size/2, -this.size/2, this.size, this.size);
        ctx.restore();
    }
}

class Orb {
    constructor() {
        this.type = 'orb';
        this.reset();
    }
    
    reset() {
        this.x = Math.random() * particleCanvas.width;
        this.y = Math.random() * particleCanvas.height;
        this.targetX = this.x;
        this.targetY = this.y;
        this.size = Math.random() * 20 + 10;
        this.vx = 0;
        this.vy = 0;
        this.color = colors.hellish[Math.floor(Math.random() * colors.hellish.length)];
        this.opacity = Math.random() * 0.6 + 0.3;
        this.life = Math.random() * 1000 + 500;
        this.maxLife = this.life;
        this.pulseOffset = Math.random() * Math.PI * 2;
        this.moveTimer = 0;
    }
    
    update() {
        this.moveTimer++;
        if (this.moveTimer > 120) {
            this.targetX = Math.random() * particleCanvas.width;
            this.targetY = Math.random() * particleCanvas.height;
            this.moveTimer = 0;
        }
        
        this.vx += (this.targetX - this.x) * 0.001;
        this.vy += (this.targetY - this.y) * 0.001;
        this.vx *= 0.95;
        this.vy *= 0.95;
        
        this.x += this.vx;
        this.y += this.vy;
        
        this.pulseOffset += 0.05;
        this.life--;
        
        if (this.life <= 0) {
            this.reset();
        }
    }
    
    draw(ctx) {
        const pulse = Math.sin(this.pulseOffset) * 0.3 + 0.7;
        const currentSize = this.size * pulse;
        
        ctx.save();
        ctx.globalAlpha = this.opacity * pulse;
        
        // Outer glow
        const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, currentSize * 2);
        gradient.addColorStop(0, this.color);
        gradient.addColorStop(0.5, this.color.replace(')', ', 0.3)').replace('rgb', 'rgba'));
        gradient.addColorStop(1, 'transparent');
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(this.x, this.y, currentSize * 2, 0, Math.PI * 2);
        ctx.fill();
        
        // Core
        ctx.fillStyle = this.color;
        ctx.shadowBlur = 30;
        ctx.shadowColor = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, currentSize, 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();
    }
}

// Create particle pools
const embers = [];
for (let i = 0; i < 100; i++) embers.push(new Ember());

const sparks = [];
for (let i = 0; i < 150; i++) sparks.push(new Spark());

const ash = [];
for (let i = 0; i < 80; i++) ash.push(new Ash());

const debris = [];
for (let i = 0; i < 40; i++) debris.push(new Debris());

const orbs = [];
for (let i = 0; i < 30; i++) orbs.push(new Orb());

// ADVANCED EXPLOSION SYSTEM
class Explosion {
    constructor(x, y, type = 'standard') {
        this.x = x;
        this.y = y;
        this.type = type;
        this.particles = [];
        this.life = type === 'shockwave' ? 120 : 100;
        this.maxLife = this.life;
        this.flashIntensity = 1;
        this.shockwaveRadius = 0;
        this.stage = 0; // Multi-stage: 0=flash, 1=expansion, 2=lingering
        
        // Initial flash
        if (type === 'shockwave') {
            createFlash(x, y, 0.5);
            triggerScreenShake(8);
        } else {
            createFlash(x, y, 0.3);
        }
        
        // Create explosion particles
        const particleCount = type === 'shockwave' ? 100 : (Math.floor(Math.random() * 40) + 50);
        for (let i = 0; i < particleCount; i++) {
            const angle = (Math.PI * 2 * i) / particleCount + (Math.random() - 0.5) * 0.8;
            const speed = type === 'shockwave' ? (Math.random() * 12 + 6) : (Math.random() * 10 + 4);
            const colorPalette = Math.random() > 0.3 ? colors.explosions : colors.plasma;
            this.particles.push({
                x: this.x,
                y: this.y,
                vx: Math.cos(angle) * speed,
                vy: Math.sin(angle) * speed,
                size: Math.random() * 8 + 3,
                color: colorPalette[Math.floor(Math.random() * colorPalette.length)],
                life: Math.random() * 80 + 60,
                maxLife: 140,
                rotation: Math.random() * Math.PI * 2
            });
        }
        
        // Spawn burning debris
        for (let i = 0; i < 5; i++) {
            const availableDebris = debris.find(d => !d.active);
            if (availableDebris) {
                availableDebris.reset(x, y);
            }
        }
    }
    
    update() {
        this.life--;
        
        // Multi-stage effects
        if (this.life > this.maxLife * 0.7) {
            this.stage = 0; // Flash stage
            this.flashIntensity = 1 - (this.maxLife - this.life) / (this.maxLife * 0.3);
        } else if (this.life > this.maxLife * 0.3) {
            this.stage = 1; // Expansion stage
            this.flashIntensity = 0;
        } else {
            this.stage = 2; // Lingering fire stage
        }
        
        // Shockwave effect
        if (this.type === 'shockwave' && this.life > this.maxLife * 0.5) {
            this.shockwaveRadius += 15;
        }
        
        this.particles.forEach(p => {
            p.x += p.vx;
            p.y += p.vy;
            p.vx *= 0.96;
            p.vy *= 0.96;
            p.vy += 0.25; // Gravity
            p.life--;
            p.size *= 0.97;
            p.rotation += 0.1;
            
            // Wind effect
            p.vx += state.windX * 0.1;
        });
        
        // Remove dead particles
        this.particles = this.particles.filter(p => p.life > 0);
        
        return this.life > 0 && this.particles.length > 0;
    }
    
    draw() {
        // Draw shockwave
        if (this.type === 'shockwave' && this.shockwaveRadius > 0 && this.shockwaveRadius < 400) {
            explosionCtx.save();
            explosionCtx.globalAlpha = 0.3 * (1 - this.shockwaveRadius / 400);
            explosionCtx.strokeStyle = '#FFFFFF';
            explosionCtx.lineWidth = 3;
            explosionCtx.shadowBlur = 20;
            explosionCtx.shadowColor = '#FFD700';
            explosionCtx.beginPath();
            explosionCtx.arc(this.x, this.y, this.shockwaveRadius, 0, Math.PI * 2);
            explosionCtx.stroke();
            explosionCtx.restore();
        }
        
        // Draw particles
        this.particles.forEach(p => {
            const opacity = (p.life / p.maxLife) * (this.life / this.maxLife);
            explosionCtx.save();
            explosionCtx.globalAlpha = opacity;
            explosionCtx.translate(p.x, p.y);
            explosionCtx.rotate(p.rotation);
            explosionCtx.fillStyle = p.color;
            explosionCtx.shadowBlur = 25;
            explosionCtx.shadowColor = p.color;
            
            if (this.stage === 2) {
                // Lingering fire - draw as flames
                explosionCtx.fillRect(-p.size/2, -p.size, p.size, p.size * 2);
            } else {
                // Explosive burst
                explosionCtx.beginPath();
                explosionCtx.arc(0, 0, p.size, 0, Math.PI * 2);
                explosionCtx.fill();
            }
            explosionCtx.restore();
        });
    }
}

// Active explosions array
const explosions = [];

// Create explosion with type
function createExplosion(x, y, type = 'standard') {
    if (!x || !y) {
        x = Math.random() * explosionCanvas.width;
        y = Math.random() * (explosionCanvas.height * 0.7) + explosionCanvas.height * 0.15;
    }
    explosions.push(new Explosion(x, y, type));
    
    // Chain reaction chance
    if (type === 'shockwave' && Math.random() > 0.7) {
        setTimeout(() => {
            const nearX = x + (Math.random() - 0.5) * 200;
            const nearY = y + (Math.random() - 0.5) * 200;
            createExplosion(nearX, nearY, 'standard');
        }, 500);
    }
}

// Schedule explosions based on intensity
function scheduleNextExplosion() {
    const baseDelay = 8000;
    const delay = baseDelay * (1 / (state.intensity + 0.5));
    setTimeout(() => {
        const type = state.stormMode || Math.random() > 0.85 ? 'shockwave' : 'standard';
        createExplosion(null, null, type);
        scheduleNextExplosion();
    }, delay);
}

scheduleNextExplosion();
setTimeout(() => createExplosion(null, null, 'shockwave'), 1000);

// ENVIRONMENTAL EFFECTS
class LavaGeyser {
    constructor() {
        this.active = false;
    }
    
    trigger() {
        this.active = true;
        this.x = Math.random() * lavaCanvas.width;
        this.y = lavaCanvas.height;
        this.life = 120;
        this.maxLife = 120;
        this.particles = [];
        
        for (let i = 0; i < 50; i++) {
            const angle = -Math.PI/2 + (Math.random() - 0.5) * Math.PI/3;
            const speed = Math.random() * 15 + 10;
            this.particles.push({
                x: this.x,
                y: this.y,
                vx: Math.cos(angle) * speed,
                vy: Math.sin(angle) * speed,
                size: Math.random() * 10 + 5,
                color: colors.lava[Math.floor(Math.random() * colors.lava.length)],
                life: Math.random() * 100 + 50
            });
        }
    }
    
    update() {
        if (!this.active) return;
        
        this.life--;
        this.particles.forEach(p => {
            p.vx *= 0.98;
            p.vy += 0.4;
            p.x += p.vx;
            p.y += p.vy;
            p.life--;
        });
        
        this.particles = this.particles.filter(p => p.life > 0);
        
        if (this.life <= 0) {
            this.active = false;
        }
    }
    
    draw() {
        if (!this.active) return;
        
        this.particles.forEach(p => {
            lavaCtx.save();
            lavaCtx.globalAlpha = p.life / 100;
            lavaCtx.fillStyle = p.color;
            lavaCtx.shadowBlur = 30;
            lavaCtx.shadowColor = p.color;
            lavaCtx.beginPath();
            lavaCtx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
            lavaCtx.fill();
            lavaCtx.restore();
        });
    }
}

class Lightning {
    constructor() {
        this.active = false;
    }
    
    trigger() {
        this.active = true;
        this.startX = Math.random() * environmentCanvas.width;
        this.startY = 0;
        this.endX = this.startX + (Math.random() - 0.5) * 300;
        this.endY = Math.random() * environmentCanvas.height * 0.6 + 200;
        this.segments = [];
        this.life = 15;
        
        // Create lightning path
        let currentX = this.startX;
        let currentY = this.startY;
        const steps = 20;
        
        for (let i = 0; i < steps; i++) {
            const nextX = currentX + (this.endX - currentX) / (steps - i) + (Math.random() - 0.5) * 50;
            const nextY = currentY + (this.endY - currentY) / (steps - i);
            this.segments.push({ x1: currentX, y1: currentY, x2: nextX, y2: nextY });
            currentX = nextX;
            currentY = nextY;
        }
        
        // Create flash
        const flash = document.createElement('div');
        flash.className = 'lightning-flash';
        document.body.appendChild(flash);
        setTimeout(() => flash.style.opacity = '1', 10);
        setTimeout(() => {
            flash.style.opacity = '0';
            setTimeout(() => document.body.removeChild(flash), 100);
        }, 80);
    }
    
    update() {
        if (!this.active) return;
        this.life--;
        if (this.life <= 0) this.active = false;
    }
    
    draw() {
        if (!this.active) return;
        
        const opacity = this.life / 15;
        environmentCtx.save();
        environmentCtx.globalAlpha = opacity;
        environmentCtx.strokeStyle = Math.random() > 0.5 ? '#FFFFFF' : '#FFD700';
        environmentCtx.lineWidth = 3;
        environmentCtx.shadowBlur = 20;
        environmentCtx.shadowColor = '#FF4500';
        environmentCtx.lineCap = 'round';
        
        this.segments.forEach(seg => {
            environmentCtx.beginPath();
            environmentCtx.moveTo(seg.x1, seg.y1);
            environmentCtx.lineTo(seg.x2, seg.y2);
            environmentCtx.stroke();
        });
        
        environmentCtx.restore();
    }
}

class Meteor {
    constructor() {
        this.active = false;
    }
    
    trigger() {
        this.active = true;
        this.x = Math.random() * environmentCanvas.width + 200;
        this.y = -100;
        this.targetX = Math.random() * environmentCanvas.width;
        this.targetY = environmentCanvas.height;
        const angle = Math.atan2(this.targetY - this.y, this.targetX - this.x);
        const speed = Math.random() * 10 + 15;
        this.vx = Math.cos(angle) * speed;
        this.vy = Math.sin(angle) * speed;
        this.size = Math.random() * 20 + 10;
        this.trail = [];
        this.life = 200;
    }
    
    update() {
        if (!this.active) return;
        
        this.x += this.vx;
        this.y += this.vy;
        this.trail.push({ x: this.x, y: this.y });
        if (this.trail.length > 30) this.trail.shift();
        
        this.life--;
        
        // Impact
        if (this.y > environmentCanvas.height - 100 || this.life <= 0) {
            this.active = false;
            createExplosion(this.x, this.y, 'shockwave');
        }
    }
    
    draw() {
        if (!this.active) return;
        
        // Draw trail
        this.trail.forEach((point, i) => {
            environmentCtx.save();
            environmentCtx.globalAlpha = i / this.trail.length * 0.6;
            const gradient = environmentCtx.createRadialGradient(point.x, point.y, 0, point.x, point.y, this.size);
            gradient.addColorStop(0, '#FFD700');
            gradient.addColorStop(0.5, '#FF4500');
            gradient.addColorStop(1, 'transparent');
            environmentCtx.fillStyle = gradient;
            environmentCtx.beginPath();
            environmentCtx.arc(point.x, point.y, this.size * (i / this.trail.length), 0, Math.PI * 2);
            environmentCtx.fill();
            environmentCtx.restore();
        });
        
        // Draw meteor
        environmentCtx.save();
        environmentCtx.fillStyle = '#FFFFFF';
        environmentCtx.shadowBlur = 40;
        environmentCtx.shadowColor = '#FFD700';
        environmentCtx.beginPath();
        environmentCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        environmentCtx.fill();
        environmentCtx.restore();
    }
}

class FireTornado {
    constructor() {
        this.active = false;
    }
    
    trigger() {
        this.active = true;
        this.x = Math.random() * fireCanvas.width;
        this.baseY = fireCanvas.height;
        this.height = 0;
        this.maxHeight = Math.random() * 300 + 200;
        this.rotation = 0;
        this.life = 300;
        this.particles = [];
    }
    
    update() {
        if (!this.active) return;
        
        if (this.height < this.maxHeight) {
            this.height += 5;
        }
        
        this.rotation += 0.15;
        this.life--;
        
        // Spawn particles
        if (Math.random() > 0.7) {
            const angle = this.rotation + Math.random() * Math.PI * 2;
            const radius = Math.random() * 50;
            const heightPos = Math.random() * this.height;
            this.particles.push({
                angle: angle,
                radius: radius,
                height: heightPos,
                life: 30,
                size: Math.random() * 8 + 3,
                color: colors.plasma[Math.floor(Math.random() * colors.plasma.length)]
            });
        }
        
        this.particles.forEach(p => {
            p.angle += 0.2;
            p.radius -= 0.5;
            p.height -= 2;
            p.life--;
        });
        
        this.particles = this.particles.filter(p => p.life > 0 && p.height > 0);
        
        if (this.life <= 0) {
            this.active = false;
        }
    }
    
    draw() {
        if (!this.active) return;
        
        this.particles.forEach(p => {
            const x = this.x + Math.cos(p.angle) * p.radius;
            const y = this.baseY - p.height;
            
            fireCtx.save();
            fireCtx.globalAlpha = p.life / 30;
            fireCtx.fillStyle = p.color;
            fireCtx.shadowBlur = 25;
            fireCtx.shadowColor = p.color;
            fireCtx.beginPath();
            fireCtx.arc(x, y, p.size, 0, Math.PI * 2);
            fireCtx.fill();
            fireCtx.restore();
        });
    }
}

// Create environmental effect instances
const lavaGeysers = [];
for (let i = 0; i < 3; i++) lavaGeysers.push(new LavaGeyser());

const lightningBolts = [];
for (let i = 0; i < 2; i++) lightningBolts.push(new Lightning());

const meteors = [];
for (let i = 0; i < 5; i++) meteors.push(new Meteor());

const fireTornadoes = [];
for (let i = 0; i < 2; i++) fireTornadoes.push(new FireTornado());

// DYNAMIC INTENSITY SYSTEM
function updateIntensity() {
    state.time++;
    
    // 30 second intensity cycle
    const cycle = (state.time % 1800) / 1800;
    state.targetIntensity = 0.3 + Math.sin(cycle * Math.PI * 2) * 0.4 + 0.3;
    
    // Smooth transition
    state.intensity += (state.targetIntensity - state.intensity) * 0.01;
    
    // Hell storm events every 60 seconds
    if (state.time % 3600 === 0) {
        triggerHellStorm();
    }
    
    // Random wind changes
    if (state.time % 120 === 0) {
        state.windX = (Math.random() - 0.5) * 2;
    }
}

function triggerHellStorm() {
    state.stormMode = true;
    state.targetIntensity = 1.0;
    
    // Trigger multiple effects
    for (let i = 0; i < 3; i++) {
        setTimeout(() => {
            createExplosion(null, null, 'shockwave');
            const availableMeteor = meteors.find(m => !m.active);
            if (availableMeteor) availableMeteor.trigger();
        }, i * 1000);
    }
    
    setTimeout(() => {
        state.stormMode = false;
    }, 10000);
}

// Helper functions
function createFlash(x, y, intensity) {
    const flash = document.createElement('div');
    flash.style.position = 'fixed';
    flash.style.top = '0';
    flash.style.left = '0';
    flash.style.width = '100%';
    flash.style.height = '100%';
    flash.style.background = `radial-gradient(circle at ${x}px ${y}px, rgba(255, 255, 255, ${intensity}), rgba(255, 215, 0, ${intensity * 0.5}) 20%, transparent 50%)`;
    flash.style.pointerEvents = 'none';
    flash.style.zIndex = '999';
    flash.style.opacity = '0';
    flash.style.transition = 'opacity 0.05s';
    document.body.appendChild(flash);
    
    setTimeout(() => {
        flash.style.opacity = '1';
        setTimeout(() => {
            flash.style.opacity = '0';
            setTimeout(() => document.body.removeChild(flash), 100);
        }, 80);
    }, 10);
}

function triggerScreenShake(amount) {
    document.body.classList.add('screen-shake');
    setTimeout(() => document.body.classList.remove('screen-shake'), 300);
}

// Environmental effect scheduling
setInterval(() => {
    if (Math.random() < state.intensity) {
        const availableGeyser = lavaGeysers.find(g => !g.active);
        if (availableGeyser) availableGeyser.trigger();
    }
}, 15000);

setInterval(() => {
    if (Math.random() < 0.7) {
        const availableLightning = lightningBolts.find(l => !l.active);
        if (availableLightning) availableLightning.trigger();
    }
}, Math.random() * 8000 + 8000);

setInterval(() => {
    if (Math.random() < state.intensity * 0.5) {
        const availableMeteor = meteors.find(m => !m.active);
        if (availableMeteor) availableMeteor.trigger();
    }
}, 20000);

setInterval(() => {
    if (Math.random() < 0.3) {
        const availableTornado = fireTornadoes.find(t => !t.active);
        if (availableTornado) availableTornado.trigger();
    }
}, 25000);

// Mouse interaction
window.addEventListener('mousemove', (e) => {
    state.mouseX = e.clientX;
    state.mouseY = e.clientY;
    
    // Mouse affects wind slightly
    state.windX += (e.movementX || 0) * 0.01;
});

window.addEventListener('click', (e) => {
    createExplosion(e.clientX, e.clientY, Math.random() > 0.5 ? 'shockwave' : 'standard');
});

// MAIN ANIMATION LOOP
function animate() {
    // Clear all canvases
    contexts.forEach(ctx => {
        ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
    });
    
    // Update intensity
    updateIntensity();
    
    // Draw heat shimmer background effect
    const shimmer = Math.sin(state.time * 0.05) * 0.03 + 0.97;
    backgroundCtx.save();
    backgroundCtx.globalAlpha = 0.15;
    backgroundCtx.fillStyle = '#FF4500';
    backgroundCtx.fillRect(0, backgroundCanvas.height * shimmer, backgroundCanvas.width, backgroundCanvas.height);
    backgroundCtx.restore();
    
    // Update and draw environmental effects
    lavaGeysers.forEach(g => {
        g.update();
        g.draw();
    });
    
    lightningBolts.forEach(l => {
        l.update();
        l.draw();
    });
    
    meteors.forEach(m => {
        m.update();
        m.draw();
    });
    
    fireTornadoes.forEach(t => {
        t.update();
        t.draw();
    });
    
    // Update and draw all particle types
    embers.forEach(p => {
        p.update();
        p.draw(particleCtx);
    });
    
    sparks.forEach(p => {
        p.update();
        p.draw(particleCtx);
    });
    
    ash.forEach(p => {
        p.update();
        p.draw(particleCtx);
    });
    
    debris.forEach(p => {
        p.update();
        p.draw(particleCtx);
    });
    
    orbs.forEach(p => {
        p.update();
        p.draw(effectsCtx);
    });
    
    // Update and draw explosions
    for (let i = explosions.length - 1; i >= 0; i--) {
        if (!explosions[i].update()) {
            explosions.splice(i, 1);
        } else {
            explosions[i].draw();
        }
    }
    
    // Post-processing: bloom effect
    effectsCtx.save();
    effectsCtx.globalCompositeOperation = 'screen';
    effectsCtx.globalAlpha = 0.1 * state.intensity;
    effectsCtx.filter = 'blur(20px)';
    effectsCtx.drawImage(explosionCanvas, 0, 0);
    effectsCtx.restore();
    
    requestAnimationFrame(animate);
}

// Start the inferno
animate();

// Trigger initial hell storm after 3 seconds
setTimeout(() => triggerHellStorm(), 3000);

// Performance monitoring
let lastTime = performance.now();
let frameCount = 0;

setInterval(() => {
    const currentTime = performance.now();
    const fps = frameCount / ((currentTime - lastTime) / 1000);
    frameCount = 0;
    lastTime = currentTime;
    
    // Dynamic quality adjustment
    if (fps < 30) {
        // Reduce particle counts if performance drops
        console.log('Low FPS detected, consider reducing particle counts');
    }
}, 5000);

function countFrame() {
    frameCount++;
}

setInterval(countFrame, 16);
    </script>
</body>
</html>